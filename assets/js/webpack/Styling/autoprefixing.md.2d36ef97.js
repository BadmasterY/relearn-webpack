(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{148:function(e,a,t){"use strict";t.r(a),function(e){t.d(a,"default",(function(){return N}));var n,c=t(86),s=(t(127),t(0),t(87));function p(){return(p=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}function o(e,a){if(null==e)return{};var t,n,c=function(e,a){if(null==e)return{};var t,n,c={},s=Object.keys(e);for(n=0;n<s.length;n++)t=s[n],a.indexOf(t)>=0||(c[t]=e[t]);return c}(e,a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)t=s[n],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(c[t]=e[t])}return c}(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var r,b,l=function(e){return function(a){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),Object(s.b)("div",a)}},i=l("MdAlert"),m={};function N(e){var a=e.components,t=o(e,["components"]);return Object(s.b)("wrapper",p({},m,t,{components:a,mdxType:"MDXLayout"}),Object(s.b)("h2",{className:"__internal",id:"自动处理前缀"},"自动处理前缀",Object(s.b)("a",p({parentName:"h2"},{href:"#%E8%87%AA%E5%8A%A8%E5%A4%84%E7%90%86%E5%89%8D%E7%BC%80","aria-hidden":!0,className:"anchor"}),"#")),Object(s.b)("p",null,"要记住特定 ",Object(s.b)("inlineCode",{parentName:"p"},"CSS")," 规则必须使用哪些供应商前缀来支持各种各样的用户, 这可能很有挑战性。",Object(s.b)("strong",{parentName:"p"},"自动处理前缀"),"解决了这个问题。它可以通过 ",Object(s.b)("inlineCode",{parentName:"p"},"PostCSS")," 和 ",Object(s.b)("a",p({parentName:"p"},{href:"https://www.npmjs.com/package/autoprefixer",target:"_blank"}),"autoprefixer")," 插件启用。",Object(s.b)("strong",{parentName:"p"},"autoprefixer")," 使用 ",Object(s.b)("a",p({parentName:"p"},{href:"https://caniuse.com/",target:"_blank"}),"Can I Use")," 服务来确定应该为哪些规则加前缀, 并且可以进一步调整其行为。"),Object(s.b)("h3",{className:"__internal",id:"配置自动处理前缀"},"配置自动处理前缀",Object(s.b)("a",p({parentName:"h3"},{href:"#%E9%85%8D%E7%BD%AE%E8%87%AA%E5%8A%A8%E5%A4%84%E7%90%86%E5%89%8D%E7%BC%80","aria-hidden":!0,className:"anchor"}),"#")),Object(s.b)("p",null,"实现自动处理前缀仅需对当前配置进行少量添加。首先安装 ",Object(s.b)("em",{parentName:"p"},Object(s.b)("inlineCode",{parentName:"em"},"postcss-loader"))," 和 ",Object(s.b)("strong",{parentName:"p"},Object(s.b)("inlineCode",{parentName:"strong"},"autoprefixer")),":"),Object(s.b)("div",{className:"rcpress-highlight","data-language":"bash"},Object(s.b)("pre",p({parentName:"div"},{className:"language-bash"}),Object(s.b)("code",p({parentName:"pre"},{className:"language-bash"}),Object(s.b)("span",p({parentName:"code"},{className:"token function"}),"npm")," ",Object(s.b)("span",p({parentName:"code"},{className:"token function"}),"add")," postcss-loader autoprefixer --develop"))),Object(s.b)("p",null,"添加配置以启用自动前缀:"),Object(s.b)("p",null,Object(s.b)("strong",{parentName:"p"},"webpack.parts.js")),Object(s.b)("div",{className:"rcpress-highlight","data-language":"js"},Object(s.b)("pre",p({parentName:"div"},{className:"language-js"}),Object(s.b)("code",p({parentName:"pre"},{className:"language-js"}),"exports",Object(s.b)("span",p({parentName:"code"},{className:"token punctuation"}),"."),Object(s.b)("span",p({parentName:"code"},{className:"token function-variable function"}),"autoprefix")," ",Object(s.b)("span",p({parentName:"code"},{className:"token operator"}),"=")," ",Object(s.b)("span",p({parentName:"code"},{className:"token punctuation"}),"("),Object(s.b)("span",p({parentName:"code"},{className:"token punctuation"}),")")," ",Object(s.b)("span",p({parentName:"code"},{className:"token operator"}),"=>")," ",Object(s.b)("span",p({parentName:"code"},{className:"token punctuation"}),"("),Object(s.b)("span",p({parentName:"code"},{className:"token punctuation"}),"{"),"\n  loader",Object(s.b)("span",p({parentName:"code"},{className:"token operator"}),":")," ",Object(s.b)("span",p({parentName:"code"},{className:"token string"}),'"postcss-loader"'),Object(s.b)("span",p({parentName:"code"},{className:"token punctuation"}),","),"\n  options",Object(s.b)("span",p({parentName:"code"},{className:"token operator"}),":")," ",Object(s.b)("span",p({parentName:"code"},{className:"token punctuation"}),"{"),"\n    ",Object(s.b)("span",p({parentName:"code"},{className:"token comment"}),"// postcssOptions: {"),"\n      plugins",Object(s.b)("span",p({parentName:"code"},{className:"token operator"}),":")," ",Object(s.b)("span",p({parentName:"code"},{className:"token punctuation"}),"["),Object(s.b)("span",p({parentName:"code"},{className:"token function"}),"require"),Object(s.b)("span",p({parentName:"code"},{className:"token punctuation"}),"("),Object(s.b)("span",p({parentName:"code"},{className:"token string"}),'"autoprefixer"'),Object(s.b)("span",p({parentName:"code"},{className:"token punctuation"}),")"),Object(s.b)("span",p({parentName:"code"},{className:"token punctuation"}),"("),Object(s.b)("span",p({parentName:"code"},{className:"token punctuation"}),")"),Object(s.b)("span",p({parentName:"code"},{className:"token punctuation"}),"]"),Object(s.b)("span",p({parentName:"code"},{className:"token punctuation"}),","),"\n    ",Object(s.b)("span",p({parentName:"code"},{className:"token comment"}),"// }"),"\n  ",Object(s.b)("span",p({parentName:"code"},{className:"token punctuation"}),"}"),Object(s.b)("span",p({parentName:"code"},{className:"token punctuation"}),","),"\n",Object(s.b)("span",p({parentName:"code"},{className:"token punctuation"}),"}"),Object(s.b)("span",p({parentName:"code"},{className:"token punctuation"}),")"),Object(s.b)("span",p({parentName:"code"},{className:"token punctuation"}),";")))),Object(s.b)("blockquote",null,Object(s.b)("p",{parentName:"blockquote"},"译者注: 如果使用 ",Object(s.b)("inlineCode",{parentName:"p"},"PostCSS 4.x"),", 请添加注释内容。")),Object(s.b)("p",null,"想要使用, 请按如下所示进行配置:"),Object(s.b)("p",null,Object(s.b)("strong",{parentName:"p"},"webpack.config.js")),Object(s.b)("div",{className:"rcpress-highlight has-highlighted-lines","data-language":"js"},Object(s.b)("pre",p({parentName:"div"},{className:"language-js"}),Object(s.b)("code",p({parentName:"pre"},{className:"language-js"}),Object(s.b)("span",p({parentName:"code"},{className:"rcpress-highlight-code-line"}),Object(s.b)("span",p({parentName:"span"},{className:"token comment"}),"// const cssLoaders = [parts.tailwind()]")),"\n",Object(s.b)("span",p({parentName:"code"},{className:"rcpress-highlight-code-line"}),Object(s.b)("span",p({parentName:"span"},{className:"token keyword"}),"const")," cssLoaders ",Object(s.b)("span",p({parentName:"span"},{className:"token operator"}),"=")," ",Object(s.b)("span",p({parentName:"span"},{className:"token punctuation"}),"["),"parts",Object(s.b)("span",p({parentName:"span"},{className:"token punctuation"}),"."),Object(s.b)("span",p({parentName:"span"},{className:"token function"}),"autoprefix"),Object(s.b)("span",p({parentName:"span"},{className:"token punctuation"}),"("),Object(s.b)("span",p({parentName:"span"},{className:"token punctuation"}),")"),Object(s.b)("span",p({parentName:"span"},{className:"token punctuation"}),",")," parts",Object(s.b)("span",p({parentName:"span"},{className:"token punctuation"}),"."),Object(s.b)("span",p({parentName:"span"},{className:"token function"}),"tailwind"),Object(s.b)("span",p({parentName:"span"},{className:"token punctuation"}),"("),Object(s.b)("span",p({parentName:"span"},{className:"token punctuation"}),")"),Object(s.b)("span",p({parentName:"span"},{className:"token punctuation"}),"]"),Object(s.b)("span",p({parentName:"span"},{className:"token punctuation"}),";"))))),Object(s.b)(i,p({message:" ",type:"warning"},{mdxType:"MdAlert"}),Object(s.b)("p",{parentName:"MdAlert"},"加载器的顺序很重要, 因为自动处理前缀应在 ",Object(s.b)("inlineCode",{parentName:"p"},"Tailwind")," 完成处理后进行。上面的配置解析为 ",Object(s.b)("mark",null,"autoprefix(tailwind(input))"),"。")),Object(s.b)("h3",{className:"__internal",id:"定义浏览器列表"},"定义浏览器列表",Object(s.b)("a",p({parentName:"h3"},{href:"#%E5%AE%9A%E4%B9%89%E6%B5%8F%E8%A7%88%E5%99%A8%E5%88%97%E8%A1%A8","aria-hidden":!0,className:"anchor"}),"#")),Object(s.b)("p",null,Object(s.b)("strong",{parentName:"p"},Object(s.b)("inlineCode",{parentName:"strong"},"autoprefixer"))," 依靠",Object(s.b)("a",p({parentName:"p"},{href:"https://www.npmjs.com/package/browserslist",target:"_blank"}),"浏览器列表"),"定义起作用。"),Object(s.b)("p",null,"要定义要支持的浏览器, 请创建一个 ",Object(s.b)("inlineCode",{parentName:"p"},".browserslistrc")," 文件。不同的插件都可以使用这个定义文件, 包括 ",Object(s.b)("strong",{parentName:"p"},Object(s.b)("inlineCode",{parentName:"strong"},"autoprefixer")),"。"),Object(s.b)("p",null,Object(s.b)("strong",{parentName:"p"},".browserslistrc")),Object(s.b)("div",{className:"rcpress-highlight","data-language":"text"},Object(s.b)("pre",p({parentName:"div"},{className:"language-text"}),Object(s.b)("code",p({parentName:"pre"},{className:"language-text"}),"> 1% # Browser usage over 1%\nLast 2 versions # Or last two versions\nIE 8 # Or IE 8"))),Object(s.b)("p",null,"如果现在(",Object(s.b)("inlineCode",{parentName:"p"},"npm run build"),")构建应用程序并检查产出的 ",Object(s.b)("inlineCode",{parentName:"p"},"CSS")," 文件, 则应该看到已为 ",Object(s.b)("inlineCode",{parentName:"p"},"CSS")," 样式添加前缀以支持较旧的浏览器。尝试调整定义, 以查看其对构建输出的影响。"),Object(s.b)(i,p({message:" ",type:"info"},{mdxType:"MdAlert"}),Object(s.b)("p",{parentName:"MdAlert"},"您可以通过 ",Object(s.b)("a",p({parentName:"p"},{href:"http://stylelint.io/",target:"_blank"}),"Stylelint")," 整理 ",Object(s.b)("inlineCode",{parentName:"p"},"CSS"),"。可以通过 ",Object(s.b)("inlineCode",{parentName:"p"},"postcss-loader")," 以与上述自动添加前缀相同的方式进行设置。")),Object(s.b)(i,p({message:" ",type:"info"},{mdxType:"MdAlert"}),Object(s.b)("p",{parentName:"MdAlert"},"通过在声明之间使用某种语法, 可以为每个开发目标(在环境中定义 ",Object(s.b)("mark",null,"BROWSERSLIST_ENV")," 或 ",Object(s.b)("mark",null,"NODE_ENV"),")定义浏览器列表 ",Object(s.b)("inlineCode",{parentName:"p"},"[development]"),"。有关更多信息和选项, 请参阅",Object(s.b)("a",p({parentName:"p"},{href:"https://www.npmjs.com/package/browserslist#configuring-for-different-environments",target:"_blank"}),"浏览器列表文档"),"。")),Object(s.b)("h3",{className:"__internal",id:"结论"},"结论",Object(s.b)("a",p({parentName:"h3"},{href:"#%E7%BB%93%E8%AE%BA","aria-hidden":!0,className:"anchor"}),"#")),Object(s.b)("p",null,"自动添加前缀是一种方便的技术, 因为它减少了编写 ",Object(s.b)("inlineCode",{parentName:"p"},"CSS")," 样式时所需的工作量。您可以在 ",Object(s.b)("inlineCode",{parentName:"p"},".browserslistrc")," 文件中维护最低浏览器要求。然后, 插件可以使用该信息来生成最佳输出。"),Object(s.b)("p",null,"回顾一下:"),Object(s.b)("ul",null,Object(s.b)("li",p({parentName:"ul"},{className:"__internal"}),"可以通过 ",Object(s.b)("inlineCode",{parentName:"li"},"PostCSS")," 插件 ",Object(s.b)("strong",{parentName:"li"},Object(s.b)("inlineCode",{parentName:"strong"},"autoprefixer"))," 启用自动添加前缀。"),Object(s.b)("li",p({parentName:"ul"},{className:"__internal"}),"自动添加前缀会根据您的浏览器列表写入缺少的 ",Object(s.b)("inlineCode",{parentName:"li"},"CSS")," 定义。"),Object(s.b)("li",p({parentName:"ul"},{className:"__internal"}),Object(s.b)("inlineCode",{parentName:"li"},".browserslistrc")," 是一个通用的标准文件, 也可以被除 ",Object(s.b)("strong",{parentName:"li"},Object(s.b)("inlineCode",{parentName:"strong"},"autoprefixer"))," 之外的其他插件使用。")))}N.isMDXComponent=!0,N=Object(c.hot)(e)(N),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(r.register(l,"makeShortcode","/Users/yuzhoujie/Desktop/work/webpack-book-china/docs/webpack/Styling/autoprefixing.md"),r.register(i,"MdAlert","/Users/yuzhoujie/Desktop/work/webpack-book-china/docs/webpack/Styling/autoprefixing.md"),r.register(m,"layoutProps","/Users/yuzhoujie/Desktop/work/webpack-book-china/docs/webpack/Styling/autoprefixing.md"),r.register("wrapper","MDXLayout","/Users/yuzhoujie/Desktop/work/webpack-book-china/docs/webpack/Styling/autoprefixing.md"),r.register(N,"MDXContent","/Users/yuzhoujie/Desktop/work/webpack-book-china/docs/webpack/Styling/autoprefixing.md")),(b="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&b(e)}.call(this,t(21)(e))}}]);