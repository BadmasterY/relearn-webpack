(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{152:function(e,a,n){"use strict";n.r(a),function(e){n.d(a,"default",(function(){return N}));var t,c=n(85),s=(n(127),n(0),n(86));function p(){return(p=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var n=arguments[a];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e}).apply(this,arguments)}function o(e,a){if(null==e)return{};var n,t,c=function(e,a){if(null==e)return{};var n,t,c={},s=Object.keys(e);for(t=0;t<s.length;t++)n=s[t],a.indexOf(n)>=0||(c[n]=e[n]);return c}(e,a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(t=0;t<s.length;t++)n=s[t],a.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(c[n]=e[n])}return c}(t="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&t(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var b,m,r=function(e){return function(a){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),Object(s.b)("div",a)}},l=r("MdAlert"),i={};function N(e){var a=e.components,n=o(e,["components"]);return Object(s.b)("wrapper",p({},i,n,{components:a,mdxType:"MDXLayout"}),Object(s.b)("h2",{className:"__internal",id:"在文件名中添加哈希"},"在文件名中添加哈希",Object(s.b)("a",p({parentName:"h2"},{href:"#%E5%9C%A8%E6%96%87%E4%BB%B6%E5%90%8D%E4%B8%AD%E6%B7%BB%E5%8A%A0%E5%93%88%E5%B8%8C","aria-hidden":!0,className:"anchor"}),"#")),Object(s.b)("p",null,"即使生成的构建可以工作, 但它使用的文件名还是有问题的。它无法有效地利用客户端的缓存机制, 因为无法判断文件是否已更改。缓存失效可以通过在文件名中添加哈希来实现。"),Object(s.b)(l,p({message:" ",type:"info"},{mdxType:"MdAlert"}),Object(s.b)("p",{parentName:"MdAlert"},"从 ",Object(s.b)("inlineCode",{parentName:"p"},"webpack 5")," 开始, ",Object(s.b)("inlineCode",{parentName:"p"},"webpack")," 使用确定性的方式生成文件名, 这是在包大小和长时间缓存之间的一个很好的折衷方案。该行为可以通过 ",Object(s.b)("inlineCode",{parentName:"p"},"optimization.moduleIds")," 和 ",Object(s.b)("inlineCode",{parentName:"p"},"optimization.chunkIds")," 控制。后一种适用于",Object(s.b)("a",p({parentName:"p"},{href:"../Building/code-splitting"}),"代码拆分"),"。")),Object(s.b)("h3",{className:"__internal",id:"占位符"},"占位符",Object(s.b)("a",p({parentName:"h3"},{href:"#%E5%8D%A0%E4%BD%8D%E7%AC%A6","aria-hidden":!0,className:"anchor"}),"#")),Object(s.b)("p",null,Object(s.b)("inlineCode",{parentName:"p"},"Webpack")," 为此提供了",Object(s.b)("strong",{parentName:"p"},"占位符"),"。这些字符串用于将特定信息附加到 ",Object(s.b)("inlineCode",{parentName:"p"},"webpack")," 输出。其中最有价值的是:"),Object(s.b)("ul",null,Object(s.b)("li",p({parentName:"ul"},{className:"__internal"}),Object(s.b)("inlineCode",{parentName:"li"},"[id]"),": 返回块 ",Object(s.b)("strong",{parentName:"li"},"ID"),"。"),Object(s.b)("li",p({parentName:"ul"},{className:"__internal"}),Object(s.b)("inlineCode",{parentName:"li"},"[path]"),": 返回文件路径。"),Object(s.b)("li",p({parentName:"ul"},{className:"__internal"}),Object(s.b)("inlineCode",{parentName:"li"},"[name]"),": 返回文件名。"),Object(s.b)("li",p({parentName:"ul"},{className:"__internal"}),Object(s.b)("inlineCode",{parentName:"li"},"[ext]"),": 返回扩展名。",Object(s.b)("inlineCode",{parentName:"li"},"[ext]")," 适用于大多数可用字段。"),Object(s.b)("li",p({parentName:"ul"},{className:"__internal"}),Object(s.b)("inlineCode",{parentName:"li"},"[fullhash]"),": 返回构建哈希。如果构建的任何部分发生更改, 则此哈希也将更改。在 ",Object(s.b)("inlineCode",{parentName:"li"},"webpack 5")," 或更低版本中, 它是 ",Object(s.b)("inlineCode",{parentName:"li"},"[hash]"),"。"),Object(s.b)("li",p({parentName:"ul"},{className:"__internal"}),Object(s.b)("inlineCode",{parentName:"li"},"[chunkhash]"),": 返回特定于入口块的哈希。配置中定义的每个入口都会接收其自己的哈希。如果入口的任何部分发生变化, 则哈希值也将发生变化。 ",Object(s.b)("inlineCode",{parentName:"li"},"[chunkhash]")," 比 ",Object(s.b)("inlineCode",{parentName:"li"},"[fullhash]")," 定义更精细。"),Object(s.b)("li",p({parentName:"ul"},{className:"__internal"}),Object(s.b)("inlineCode",{parentName:"li"},"[contenthash]"),": 返回基于内容生成的哈希。从 ",Object(s.b)("inlineCode",{parentName:"li"},"webpack 5")," 开始, 这是生产模式下的新默认设置。")),Object(s.b)("p",null,"最好只将 ",Object(s.b)("inlineCode",{parentName:"p"},"hash")," 与 ",Object(s.b)("inlineCode",{parentName:"p"},"contenthash")," 用于生产模式, 因为在开发过程中哈希并没有太大的好处。"),Object(s.b)(l,p({message:" ",type:"info"},{mdxType:"MdAlert"}),Object(s.b)("p",{parentName:"MdAlert"},"可以使用特定的语法对 ",Object(s.b)("inlineCode",{parentName:"p"},"hash")," 和 ",Object(s.b)("inlineCode",{parentName:"p"},"contenthash")," 进行切片: ",Object(s.b)("inlineCode",{parentName:"p"},"[contenthash:4]"),"。这样将生成 ",Object(s.b)("inlineCode",{parentName:"p"},"8c4c"),", 而不是 ",Object(s.b)("inlineCode",{parentName:"p"},"8c4cbfdb91ff93f3f3c5")," 这样的哈希。")),Object(s.b)(l,p({message:" ",type:"info"},{mdxType:"MdAlert"}),Object(s.b)("p",{parentName:"MdAlert"},"还有更多选项可用, 您甚至可以按照 ",Object(s.b)("a",p({parentName:"p"},{href:"https://www.npmjs.com/package/loader-utils#interpolatename",target:"_blank"}),"loader-utils")," 文档中的说明修改哈希和摘要类型。")),Object(s.b)(l,p({message:" ",type:"warning"},{mdxType:"MdAlert"}),Object(s.b)("p",{parentName:"MdAlert"},"如果您使用的是 ",Object(s.b)("inlineCode",{parentName:"p"},"webpack 4"),", 请谨慎操作, 因为 ",Object(s.b)("a",p({parentName:"p"},{href:"https://github.com/webpack/webpack/issues/11146",target:"_blank"}),Object(s.b)("inlineCode",{parentName:"a"},"contenthash")," 并不完全可靠"),"。有可能 ",Object(s.b)("inlineCode",{parentName:"p"},"chunkhash")," 是最佳的选项。",Object(s.b)("inlineCode",{parentName:"p"},"Webpack 5")," 为此提供了更好的解决方案。")),Object(s.b)("h3",{className:"__internal",id:"占位符示例"},"占位符示例",Object(s.b)("a",p({parentName:"h3"},{href:"#%E5%8D%A0%E4%BD%8D%E7%AC%A6%E7%A4%BA%E4%BE%8B","aria-hidden":!0,className:"anchor"}),"#")),Object(s.b)("p",null,"假设您正在使用以下配置:"),Object(s.b)("div",{className:"rcpress-highlight","data-language":"js"},Object(s.b)("pre",p({parentName:"div"},{className:"language-js"}),Object(s.b)("code",p({parentName:"pre"},{className:"language-js"}),Object(s.b)("span",p({parentName:"code"},{className:"token punctuation"}),"{"),"\n  output",Object(s.b)("span",p({parentName:"code"},{className:"token operator"}),":")," ",Object(s.b)("span",p({parentName:"code"},{className:"token punctuation"}),"{"),"\n    path",Object(s.b)("span",p({parentName:"code"},{className:"token operator"}),":")," ",Object(s.b)("span",p({parentName:"code"},{className:"token constant"}),"PATHS"),Object(s.b)("span",p({parentName:"code"},{className:"token punctuation"}),"."),"build",Object(s.b)("span",p({parentName:"code"},{className:"token punctuation"}),","),"\n    filename",Object(s.b)("span",p({parentName:"code"},{className:"token operator"}),":")," ",Object(s.b)("span",p({parentName:"code"},{className:"token string"}),'"[name].[contenthash].js"'),Object(s.b)("span",p({parentName:"code"},{className:"token punctuation"}),","),"\n  ",Object(s.b)("span",p({parentName:"code"},{className:"token punctuation"}),"}"),Object(s.b)("span",p({parentName:"code"},{className:"token punctuation"}),","),"\n",Object(s.b)("span",p({parentName:"code"},{className:"token punctuation"}),"}"),Object(s.b)("span",p({parentName:"code"},{className:"token punctuation"}),",")))),Object(s.b)("p",null,Object(s.b)("inlineCode",{parentName:"p"},"Webpack")," 将基于它生成如下文件名:"),Object(s.b)("div",{className:"rcpress-highlight","data-language":"js"},Object(s.b)("pre",p({parentName:"div"},{className:"language-js"}),Object(s.b)("code",p({parentName:"pre"},{className:"language-js"}),"main",Object(s.b)("span",p({parentName:"code"},{className:"token punctuation"}),"."),"d587bbd6e38337f5accd",Object(s.b)("span",p({parentName:"code"},{className:"token punctuation"}),"."),"js\nvendor",Object(s.b)("span",p({parentName:"code"},{className:"token punctuation"}),"."),"dc746a5db4ed650296e1",Object(s.b)("span",p({parentName:"code"},{className:"token punctuation"}),"."),"js"))),Object(s.b)("p",null,"如果与块相关的文件内容不同, 则哈希也将变更, 从而使缓存无效。更准确地说, 浏览器向文件发送新请求。如果仅 ",Object(s.b)("inlineCode",{parentName:"p"},"main")," 需要更新, 则仅需要再次请求该文件。"),Object(s.b)("p",null,"通过生成静态文件名(即 ",Object(s.b)("inlineCode",{parentName:"p"},"main.js?d587bbd6e38337f5accd"),")并通过查询字符串使缓存无效, 可以实现相同的结果。问号后面的部分会使缓存无效的哈希。根据 ",Object(s.b)("a",p({parentName:"p"},{href:"http://www.stevesouders.com/blog/2008/08/23/revving-filenames-dont-use-querystring/",target:"_blank"}),"Steve Souders 的说法"),", 将哈希值附加到文件名是最有效的选择。"),Object(s.b)("h3",{className:"__internal",id:"设置哈希"},"设置哈希",Object(s.b)("a",p({parentName:"h3"},{href:"#%E8%AE%BE%E7%BD%AE%E5%93%88%E5%B8%8C","aria-hidden":!0,className:"anchor"}),"#")),Object(s.b)("p",null,"当前配置需要进行调整以生成适当的哈希值。调整如下:"),Object(s.b)("p",null,Object(s.b)("strong",{parentName:"p"},"webpack.config.js")),Object(s.b)("div",{className:"rcpress-highlight has-highlighted-lines","data-language":"js"},Object(s.b)("pre",p({parentName:"div"},{className:"language-js"}),Object(s.b)("code",p({parentName:"pre"},{className:"language-js"}),Object(s.b)("span",p({parentName:"code"},{className:"token keyword"}),"const")," commonConfig ",Object(s.b)("span",p({parentName:"code"},{className:"token operator"}),"=")," ",Object(s.b)("span",p({parentName:"code"},{className:"token function"}),"merge"),Object(s.b)("span",p({parentName:"code"},{className:"token punctuation"}),"("),Object(s.b)("span",p({parentName:"code"},{className:"token punctuation"}),"["),"\n  ",Object(s.b)("span",p({parentName:"code"},{className:"token operator"}),"..."),Object(s.b)("span",p({parentName:"code"},{className:"token operator"}),"..."),"\n  parts",Object(s.b)("span",p({parentName:"code"},{className:"token punctuation"}),"."),Object(s.b)("span",p({parentName:"code"},{className:"token function"}),"loadImages"),Object(s.b)("span",p({parentName:"code"},{className:"token punctuation"}),"("),Object(s.b)("span",p({parentName:"code"},{className:"token punctuation"}),"{"),"\n    options",Object(s.b)("span",p({parentName:"code"},{className:"token operator"}),":")," ",Object(s.b)("span",p({parentName:"code"},{className:"token punctuation"}),"{"),"\n      limit",Object(s.b)("span",p({parentName:"code"},{className:"token operator"}),":")," ",Object(s.b)("span",p({parentName:"code"},{className:"token number"}),"15000"),Object(s.b)("span",p({parentName:"code"},{className:"token punctuation"}),","),"\n\n",Object(s.b)("span",p({parentName:"code"},{className:"rcpress-highlight-code-line"}),"    ",Object(s.b)("span",p({parentName:"span"},{className:"token comment"}),'//   name: "[name].[ext]",')),"\n",Object(s.b)("span",p({parentName:"code"},{className:"rcpress-highlight-code-line"}),"      name",Object(s.b)("span",p({parentName:"span"},{className:"token operator"}),":")," ",Object(s.b)("span",p({parentName:"span"},{className:"token string"}),'"[name].[contenthash:4].[ext]"'),Object(s.b)("span",p({parentName:"span"},{className:"token punctuation"}),",")),"    ",Object(s.b)("span",p({parentName:"code"},{className:"token punctuation"}),"}"),Object(s.b)("span",p({parentName:"code"},{className:"token punctuation"}),","),"\n  ",Object(s.b)("span",p({parentName:"code"},{className:"token punctuation"}),"}"),Object(s.b)("span",p({parentName:"code"},{className:"token punctuation"}),")"),Object(s.b)("span",p({parentName:"code"},{className:"token punctuation"}),","),"\n  ",Object(s.b)("span",p({parentName:"code"},{className:"token operator"}),"..."),Object(s.b)("span",p({parentName:"code"},{className:"token operator"}),"..."),"\n",Object(s.b)("span",p({parentName:"code"},{className:"token punctuation"}),"]"),Object(s.b)("span",p({parentName:"code"},{className:"token punctuation"}),")"),"\n\n",Object(s.b)("span",p({parentName:"code"},{className:"token keyword"}),"const")," productionConfig ",Object(s.b)("span",p({parentName:"code"},{className:"token operator"}),"=")," ",Object(s.b)("span",p({parentName:"code"},{className:"token function"}),"merge"),Object(s.b)("span",p({parentName:"code"},{className:"token punctuation"}),"("),Object(s.b)("span",p({parentName:"code"},{className:"token punctuation"}),"["),"\n",Object(s.b)("span",p({parentName:"code"},{className:"rcpress-highlight-code-line"}),"  ",Object(s.b)("span",p({parentName:"span"},{className:"token punctuation"}),"{")),Object(s.b)("span",p({parentName:"code"},{className:"rcpress-highlight-code-line"}),"    output",Object(s.b)("span",p({parentName:"span"},{className:"token operator"}),":")," ",Object(s.b)("span",p({parentName:"span"},{className:"token punctuation"}),"{")),Object(s.b)("span",p({parentName:"code"},{className:"rcpress-highlight-code-line"}),"      chunkFilename",Object(s.b)("span",p({parentName:"span"},{className:"token operator"}),":")," ",Object(s.b)("span",p({parentName:"span"},{className:"token string"}),'"[name].[contenthash:4].js"'),Object(s.b)("span",p({parentName:"span"},{className:"token punctuation"}),",")),Object(s.b)("span",p({parentName:"code"},{className:"rcpress-highlight-code-line"}),"      filename",Object(s.b)("span",p({parentName:"span"},{className:"token operator"}),":")," ",Object(s.b)("span",p({parentName:"span"},{className:"token string"}),'"[name].[contenthash:4].js"'),Object(s.b)("span",p({parentName:"span"},{className:"token punctuation"}),",")),Object(s.b)("span",p({parentName:"code"},{className:"rcpress-highlight-code-line"}),"    ",Object(s.b)("span",p({parentName:"span"},{className:"token punctuation"}),"}"),Object(s.b)("span",p({parentName:"span"},{className:"token punctuation"}),",")),Object(s.b)("span",p({parentName:"code"},{className:"rcpress-highlight-code-line"}),"  ",Object(s.b)("span",p({parentName:"span"},{className:"token punctuation"}),"}"),Object(s.b)("span",p({parentName:"span"},{className:"token punctuation"}),",")),"  ",Object(s.b)("span",p({parentName:"code"},{className:"token operator"}),"..."),Object(s.b)("span",p({parentName:"code"},{className:"token operator"}),"..."),"\n",Object(s.b)("span",p({parentName:"code"},{className:"token punctuation"}),"]"),Object(s.b)("span",p({parentName:"code"},{className:"token punctuation"}),")"),Object(s.b)("span",p({parentName:"code"},{className:"token punctuation"}),";")))),Object(s.b)("p",null,"为了确保提取的 ",Object(s.b)("inlineCode",{parentName:"p"},"CSS")," 也正确使用哈希, 请调整:"),Object(s.b)("p",null,Object(s.b)("strong",{parentName:"p"},"webpack.parts.js")),Object(s.b)("div",{className:"rcpress-highlight has-highlighted-lines","data-language":"js"},Object(s.b)("pre",p({parentName:"div"},{className:"language-js"}),Object(s.b)("code",p({parentName:"pre"},{className:"language-js"}),"exports",Object(s.b)("span",p({parentName:"code"},{className:"token punctuation"}),"."),Object(s.b)("span",p({parentName:"code"},{className:"token function-variable function"}),"extractCSS")," ",Object(s.b)("span",p({parentName:"code"},{className:"token operator"}),"=")," ",Object(s.b)("span",p({parentName:"code"},{className:"token punctuation"}),"("),Object(s.b)("span",p({parentName:"code"},{className:"token parameter"}),Object(s.b)("span",p({parentName:"span"},{className:"token punctuation"}),"{")," options ",Object(s.b)("span",p({parentName:"span"},{className:"token operator"}),"=")," ",Object(s.b)("span",p({parentName:"span"},{className:"token punctuation"}),"{"),Object(s.b)("span",p({parentName:"span"},{className:"token punctuation"}),"}"),Object(s.b)("span",p({parentName:"span"},{className:"token punctuation"}),",")," loaders ",Object(s.b)("span",p({parentName:"span"},{className:"token operator"}),"=")," ",Object(s.b)("span",p({parentName:"span"},{className:"token punctuation"}),"["),Object(s.b)("span",p({parentName:"span"},{className:"token punctuation"}),"]")," ",Object(s.b)("span",p({parentName:"span"},{className:"token punctuation"}),"}")," ",Object(s.b)("span",p({parentName:"span"},{className:"token operator"}),"=")," ",Object(s.b)("span",p({parentName:"span"},{className:"token punctuation"}),"{"),Object(s.b)("span",p({parentName:"span"},{className:"token punctuation"}),"}")),Object(s.b)("span",p({parentName:"code"},{className:"token punctuation"}),")")," ",Object(s.b)("span",p({parentName:"code"},{className:"token operator"}),"=>")," ",Object(s.b)("span",p({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",Object(s.b)("span",p({parentName:"code"},{className:"token keyword"}),"return")," ",Object(s.b)("span",p({parentName:"code"},{className:"token punctuation"}),"{"),"\n    ",Object(s.b)("span",p({parentName:"code"},{className:"token operator"}),"..."),Object(s.b)("span",p({parentName:"code"},{className:"token operator"}),"..."),"\n    plugins",Object(s.b)("span",p({parentName:"code"},{className:"token operator"}),":")," ",Object(s.b)("span",p({parentName:"code"},{className:"token punctuation"}),"["),"\n      ",Object(s.b)("span",p({parentName:"code"},{className:"token keyword"}),"new")," ",Object(s.b)("span",p({parentName:"code"},{className:"token class-name"}),"MiniCssExtractPlugin"),Object(s.b)("span",p({parentName:"code"},{className:"token punctuation"}),"("),Object(s.b)("span",p({parentName:"code"},{className:"token punctuation"}),"{"),"\n\n",Object(s.b)("span",p({parentName:"code"},{className:"rcpress-highlight-code-line"}),"        ",Object(s.b)("span",p({parentName:"span"},{className:"token comment"}),'// filename: "[name].css",')),"\n",Object(s.b)("span",p({parentName:"code"},{className:"rcpress-highlight-code-line"}),"        filename",Object(s.b)("span",p({parentName:"span"},{className:"token operator"}),":")," ",Object(s.b)("span",p({parentName:"span"},{className:"token string"}),'"[name].[contenthash:4].css"'),Object(s.b)("span",p({parentName:"span"},{className:"token punctuation"}),",")),"      ",Object(s.b)("span",p({parentName:"code"},{className:"token punctuation"}),"}"),Object(s.b)("span",p({parentName:"code"},{className:"token punctuation"}),")"),Object(s.b)("span",p({parentName:"code"},{className:"token punctuation"}),","),"\n    ",Object(s.b)("span",p({parentName:"code"},{className:"token punctuation"}),"]"),Object(s.b)("span",p({parentName:"code"},{className:"token punctuation"}),","),"\n  ",Object(s.b)("span",p({parentName:"code"},{className:"token punctuation"}),"}"),Object(s.b)("span",p({parentName:"code"},{className:"token punctuation"}),";"),"\n",Object(s.b)("span",p({parentName:"code"},{className:"token punctuation"}),"}"),Object(s.b)("span",p({parentName:"code"},{className:"token punctuation"}),";")))),Object(s.b)("p",null,"如果您现在生成一个构建(",Object(s.b)("inlineCode",{parentName:"p"},"npm run build"),"), 则应该看到以下内容:"),Object(s.b)("div",{className:"rcpress-highlight","data-language":"bash"},Object(s.b)("pre",p({parentName:"div"},{className:"language-bash"}),Object(s.b)("code",p({parentName:"pre"},{className:"language-bash"}),"⬡ webpack: Build Finished\n⬡ webpack: Hash: d33ed83f3028667c8738\n  Version: webpack ",Object(s.b)("span",p({parentName:"code"},{className:"token number"}),"5.0"),".0-beta.29\n  Time: ",Object(s.b)("span",p({parentName:"code"},{className:"token number"}),"11657")," ms\n  Built at: ",Object(s.b)("span",p({parentName:"code"},{className:"token number"}),"2020"),"-09-23 ",Object(s.b)("span",p({parentName:"code"},{className:"token number"}),"14"),":23:50\n  asset ",Object(s.b)("span",p({parentName:"code"},{className:"token number"}),"34"),".b55b.js ",Object(s.b)("span",p({parentName:"code"},{className:"token number"}),"201")," bytes ",Object(s.b)("span",p({parentName:"code"},{className:"token punctuation"}),"["),"emitted",Object(s.b)("span",p({parentName:"code"},{className:"token punctuation"}),"]")," ",Object(s.b)("span",p({parentName:"code"},{className:"token punctuation"}),"["),"immutable",Object(s.b)("span",p({parentName:"code"},{className:"token punctuation"}),"]")," ",Object(s.b)("span",p({parentName:"code"},{className:"token punctuation"}),"["),"minimized",Object(s.b)("span",p({parentName:"code"},{className:"token punctuation"}),"]")," ",Object(s.b)("span",p({parentName:"code"},{className:"token number"}),"1")," related asset\n  asset ",Object(s.b)("span",p({parentName:"code"},{className:"token number"}),"728"),".7dfb.js ",Object(s.b)("span",p({parentName:"code"},{className:"token number"}),"139")," KiB ",Object(s.b)("span",p({parentName:"code"},{className:"token punctuation"}),"["),"emitted",Object(s.b)("span",p({parentName:"code"},{className:"token punctuation"}),"]")," ",Object(s.b)("span",p({parentName:"code"},{className:"token punctuation"}),"["),"immutable",Object(s.b)("span",p({parentName:"code"},{className:"token punctuation"}),"]")," ",Object(s.b)("span",p({parentName:"code"},{className:"token punctuation"}),"["),"minimized",Object(s.b)("span",p({parentName:"code"},{className:"token punctuation"}),"]")," ",Object(s.b)("span",p({parentName:"code"},{className:"token punctuation"}),"("),"id hint: vendors",Object(s.b)("span",p({parentName:"code"},{className:"token punctuation"}),")")," ",Object(s.b)("span",p({parentName:"code"},{className:"token number"}),"2")," related assets\n  asset index.html ",Object(s.b)("span",p({parentName:"code"},{className:"token number"}),"282")," bytes ",Object(s.b)("span",p({parentName:"code"},{className:"token punctuation"}),"["),"emitted",Object(s.b)("span",p({parentName:"code"},{className:"token punctuation"}),"]"),"\n  asset logo.37c9.jpg ",Object(s.b)("span",p({parentName:"code"},{className:"token number"}),"515")," KiB ",Object(s.b)("span",p({parentName:"code"},{className:"token punctuation"}),"["),"emitted",Object(s.b)("span",p({parentName:"code"},{className:"token punctuation"}),"]")," ",Object(s.b)("span",p({parentName:"code"},{className:"token punctuation"}),"["),"immutable",Object(s.b)("span",p({parentName:"code"},{className:"token punctuation"}),"]")," ",Object(s.b)("span",p({parentName:"code"},{className:"token punctuation"}),"["),"big",Object(s.b)("span",p({parentName:"code"},{className:"token punctuation"}),"]")," ",Object(s.b)("span",p({parentName:"code"},{className:"token punctuation"}),"("),"auxiliary name: main",Object(s.b)("span",p({parentName:"code"},{className:"token punctuation"}),")"),"\n  asset main.38f4.js ",Object(s.b)("span",p({parentName:"code"},{className:"token number"}),"2.93")," KiB ",Object(s.b)("span",p({parentName:"code"},{className:"token punctuation"}),"["),"emitted",Object(s.b)("span",p({parentName:"code"},{className:"token punctuation"}),"]")," ",Object(s.b)("span",p({parentName:"code"},{className:"token punctuation"}),"["),"immutable",Object(s.b)("span",p({parentName:"code"},{className:"token punctuation"}),"]")," ",Object(s.b)("span",p({parentName:"code"},{className:"token punctuation"}),"["),"minimized",Object(s.b)("span",p({parentName:"code"},{className:"token punctuation"}),"]")," ",Object(s.b)("span",p({parentName:"code"},{className:"token punctuation"}),"("),"name: main",Object(s.b)("span",p({parentName:"code"},{className:"token punctuation"}),")")," ",Object(s.b)("span",p({parentName:"code"},{className:"token number"}),"1")," related asset\n  asset main.be03.css ",Object(s.b)("span",p({parentName:"code"},{className:"token number"}),"1.15")," KiB ",Object(s.b)("span",p({parentName:"code"},{className:"token punctuation"}),"["),"emitted",Object(s.b)("span",p({parentName:"code"},{className:"token punctuation"}),"]")," ",Object(s.b)("span",p({parentName:"code"},{className:"token punctuation"}),"["),"immutable",Object(s.b)("span",p({parentName:"code"},{className:"token punctuation"}),"]")," ",Object(s.b)("span",p({parentName:"code"},{className:"token punctuation"}),"("),"name: main",Object(s.b)("span",p({parentName:"code"},{className:"token punctuation"}),")"),"\n  Entrypoint main ",Object(s.b)("span",p({parentName:"code"},{className:"token operator"}),"=")," ",Object(s.b)("span",p({parentName:"code"},{className:"token number"}),"728"),".7dfb.js main.be03.css main.38f4.js ",Object(s.b)("span",p({parentName:"code"},{className:"token punctuation"}),"("),Object(s.b)("span",p({parentName:"code"},{className:"token number"}),"728"),".a197.js.map logo.37c9.jpg main.c9ba.js.map",Object(s.b)("span",p({parentName:"code"},{className:"token punctuation"}),")")))),Object(s.b)("p",null,"这些文件现在有了整洁的哈希。为了证明它对样式有效, 您可以尝试更改 ",Object(s.b)("inlineCode",{parentName:"p"},"src/main.css")," 看看您重建时哈希是否会发生改变。"),Object(s.b)(l,p({message:" ",type:"warning"},{mdxType:"MdAlert"}),Object(s.b)("p",{parentName:"MdAlert"},"为了使输出更适合书中的内容, 哈希值已被切分。实际上, 您可以跳过切片。")),Object(s.b)("h3",{className:"__internal",id:"结论"},"结论",Object(s.b)("a",p({parentName:"h3"},{href:"#%E7%BB%93%E8%AE%BA","aria-hidden":!0,className:"anchor"}),"#")),Object(s.b)("p",null,"将与文件内容相关的哈希值包含到它们的名称中, 可以在客户端使它们失效。如果哈希值已更改, 则客户端将再次下载该资源。"),Object(s.b)("p",null,"回顾一下:"),Object(s.b)("ul",null,Object(s.b)("li",p({parentName:"ul"},{className:"__internal"}),Object(s.b)("inlineCode",{parentName:"li"},"Webpack")," 的",Object(s.b)("strong",{parentName:"li"},"占位符"),"允许您调整文件名, 并允许您在其中包含哈希。"),Object(s.b)("li",p({parentName:"ul"},{className:"__internal"}),"最有价值的占位符 ",Object(s.b)("inlineCode",{parentName:"li"},"[name]"),", ",Object(s.b)("inlineCode",{parentName:"li"},"[contenthash]")," 和 ",Object(s.b)("inlineCode",{parentName:"li"},"[ext]"),"。",Object(s.b)("inlineCode",{parentName:"li"},"contenthash")," 基于块内容导出哈希值。"),Object(s.b)("li",p({parentName:"ul"},{className:"__internal"}),"如果您使用 ",Object(s.b)("inlineCode",{parentName:"li"},"MiniCssExtractPlugin"),", 则也应该使用 ",Object(s.b)("inlineCode",{parentName:"li"},"[contenthash]"),"。这样, 仅当内容更改时, 生成的资源才会失效。")),Object(s.b)("p",null,"即使项目现在生成哈希, 输出也不是完美无缺的。问题是, 如果应用程序发生更改, 它也会使供应商捆绑包失效。下一章将深入讨论这个主题, 并向您展示如何提取 ",Object(s.b)("inlineCode",{parentName:"p"},"webpack")," ",Object(s.b)("strong",{parentName:"p"},"运行时"),"来解决这个问题。"))}N.isMDXComponent=!0,N=Object(c.hot)(e)(N),(b="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(b.register(r,"makeShortcode","/Users/yuzhoujie/Desktop/work/webpack-book-china/docs/webpack/Optimizing/adding-hashes-to-filenames.md"),b.register(l,"MdAlert","/Users/yuzhoujie/Desktop/work/webpack-book-china/docs/webpack/Optimizing/adding-hashes-to-filenames.md"),b.register(i,"layoutProps","/Users/yuzhoujie/Desktop/work/webpack-book-china/docs/webpack/Optimizing/adding-hashes-to-filenames.md"),b.register("wrapper","MDXLayout","/Users/yuzhoujie/Desktop/work/webpack-book-china/docs/webpack/Optimizing/adding-hashes-to-filenames.md"),b.register(N,"MDXContent","/Users/yuzhoujie/Desktop/work/webpack-book-china/docs/webpack/Optimizing/adding-hashes-to-filenames.md")),(m="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&m(e)}.call(this,n(21)(e))}}]);