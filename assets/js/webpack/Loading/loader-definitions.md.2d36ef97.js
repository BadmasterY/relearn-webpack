(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{146:function(e,a,n){"use strict";n.r(a),function(e){n.d(a,"default",(function(){return i}));var t,c=n(86),s=(n(127),n(0),n(87));function o(){return(o=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var n=arguments[a];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e}).apply(this,arguments)}function p(e,a){if(null==e)return{};var n,t,c=function(e,a){if(null==e)return{};var n,t,c={},s=Object.keys(e);for(t=0;t<s.length;t++)n=s[t],a.indexOf(n)>=0||(c[n]=e[n]);return c}(e,a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(t=0;t<s.length;t++)n=s[t],a.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(c[n]=e[n])}return c}(t="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&t(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var b,r,m=function(e){return function(a){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),Object(s.b)("div",a)}},N=m("MdAlert"),l={};function i(e){var a=e.components,n=p(e,["components"]);return Object(s.b)("wrapper",o({},l,n,{components:a,mdxType:"MDXLayout"}),Object(s.b)("h2",{className:"__internal",id:"加载器定义"},"加载器定义",Object(s.b)("a",o({parentName:"h2"},{href:"#%E5%8A%A0%E8%BD%BD%E5%99%A8%E5%AE%9A%E4%B9%89","aria-hidden":!0,className:"anchor"}),"#")),Object(s.b)("p",null,Object(s.b)("inlineCode",{parentName:"p"},"Webpack")," 提供了多种配置模块加载器的方法。每个加载器都是一个接受输入并返回输出的函数。它们可能会产生副作用, 因为它们会散发到文件系统, 并且可能拦截执行以实现缓存。"),Object(s.b)("h3",{className:"__internal",id:"加载器剖析"},"加载器剖析",Object(s.b)("a",o({parentName:"h3"},{href:"#%E5%8A%A0%E8%BD%BD%E5%99%A8%E5%89%96%E6%9E%90","aria-hidden":!0,className:"anchor"}),"#")),Object(s.b)("p",null,Object(s.b)("inlineCode",{parentName:"p"},"Webpack")," 支持开箱即用的常见 ",Object(s.b)("inlineCode",{parentName:"p"},"JavaScript")," 格式。通过设置一个或多个加载器, 并将这些加载器与目录结构连接起来, 可以使用加载器处理其他格式。在下面的示例中, ",Object(s.b)("inlineCode",{parentName:"p"},"webpack")," 通过 ",Object(s.b)("inlineCode",{parentName:"p"},"Babel")," 处理 ",Object(s.b)("inlineCode",{parentName:"p"},"JavaScript"),":"),Object(s.b)("p",null,Object(s.b)("strong",{parentName:"p"},"webpack.config.js")),Object(s.b)("div",{className:"rcpress-highlight","data-language":"js"},Object(s.b)("pre",o({parentName:"div"},{className:"language-js"}),Object(s.b)("code",o({parentName:"pre"},{className:"language-js"}),Object(s.b)("span",o({parentName:"code"},{className:"token keyword"}),"const")," config ",Object(s.b)("span",o({parentName:"code"},{className:"token operator"}),"=")," ",Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),"{"),"\n  module",Object(s.b)("span",o({parentName:"code"},{className:"token operator"}),":")," ",Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),"{"),"\n    rules",Object(s.b)("span",o({parentName:"code"},{className:"token operator"}),":")," ",Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),"["),"\n      ",Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),"{"),"\n        ",Object(s.b)("span",o({parentName:"code"},{className:"token comment"}),"// **Conditions** to match files using RegExp, function."),"\n        test",Object(s.b)("span",o({parentName:"code"},{className:"token operator"}),":")," ",Object(s.b)("span",o({parentName:"code"},{className:"token regex"}),"/\\.js$/"),Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),","),"\n\n        ",Object(s.b)("span",o({parentName:"code"},{className:"token comment"}),"// **Restrict** matching to a directory."),"\n        include",Object(s.b)("span",o({parentName:"code"},{className:"token operator"}),":")," path",Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),"."),Object(s.b)("span",o({parentName:"code"},{className:"token function"}),"join"),Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),"("),"__dirname",Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),",")," ",Object(s.b)("span",o({parentName:"code"},{className:"token string"}),'"app"'),Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),")"),Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),","),"\n        ",Object(s.b)("span",o({parentName:"code"},{className:"token function-variable function"}),"exclude"),Object(s.b)("span",o({parentName:"code"},{className:"token operator"}),":")," ",Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),"("),Object(s.b)("span",o({parentName:"code"},{className:"token parameter"}),"path"),Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),")")," ",Object(s.b)("span",o({parentName:"code"},{className:"token operator"}),"=>")," path",Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),"."),Object(s.b)("span",o({parentName:"code"},{className:"token function"}),"match"),Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),"("),Object(s.b)("span",o({parentName:"code"},{className:"token regex"}),"/node_modules/"),Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),")"),Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),";"),"\n\n        ",Object(s.b)("span",o({parentName:"code"},{className:"token comment"}),"// **Actions** to apply loaders to the matched files."),"\n        use",Object(s.b)("span",o({parentName:"code"},{className:"token operator"}),":")," ",Object(s.b)("span",o({parentName:"code"},{className:"token string"}),'"babel-loader"'),Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),","),"\n      ",Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),"}"),Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),","),"\n    ",Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),"]"),Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),","),"\n  ",Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),"}"),Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),","),"\n",Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),"}"),Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),";")))),Object(s.b)(N,o({message:" ",type:"info"},{mdxType:"MdAlert"}),Object(s.b)("p",{parentName:"MdAlert"},"如果不确定特定的 ",Object(s.b)("inlineCode",{parentName:"p"},"RegExp")," 是否正确匹配, 请考虑使用在线工具, 例如 ",Object(s.b)("a",o({parentName:"p"},{href:"https://regex101.com/",target:"_blank"}),"regex101"),", ",Object(s.b)("a",o({parentName:"p"},{href:"https://regexr.com/",target:"_blank"}),"RegExr"),", ",Object(s.b)("a",o({parentName:"p"},{href:"https://regexper.com/",target:"_blank"}),"Regexper")," 或 ",Object(s.b)("a",o({parentName:"p"},{href:"https://extendsclass.com/regex-tester.html",target:"_blank"}),"ExtendsClass RegEx Tester"),"。")),Object(s.b)(N,o({message:" ",type:"info"},{mdxType:"MdAlert"}),Object(s.b)("p",{parentName:"MdAlert"},"在 ",Object(s.b)("inlineCode",{parentName:"p"},"webpack 5")," 中, 提供了一种实验语法。要使用它, 请设置 ",Object(s.b)("mark",null,"experiments.assets")," 为 ",Object(s.b)("inlineCode",{parentName:"p"},"true"),"。之后, 您可以使用 ",Object(s.b)("mark",null,'type: "asset"')," 而不需要定义加载, 而 ",Object(s.b)("inlineCode",{parentName:"p"},"webpack")," 可以立即完成正确的事情。",Object(s.b)("inlineCode",{parentName:"p"},"webpack")," 的",Object(s.b)("a",o({parentName:"p"},{href:"https://github.com/webpack/webpack/tree/master/examples/asset-simple",target:"_blank"}),"简单资源示例"),"和",Object(s.b)("a",o({parentName:"p"},{href:"https://github.com/webpack/webpack/tree/master/examples/asset-advanced",target:"_blank"}),"复杂资源示例"),"说明了其用法。")),Object(s.b)("h3",{className:"__internal",id:"加载器解析顺序"},"加载器解析顺序",Object(s.b)("a",o({parentName:"h3"},{href:"#%E5%8A%A0%E8%BD%BD%E5%99%A8%E8%A7%A3%E6%9E%90%E9%A1%BA%E5%BA%8F","aria-hidden":!0,className:"anchor"}),"#")),Object(s.b)("p",null,"最好记住, 总是从右到左, 从下到上(独立定义)解析 ",Object(s.b)("inlineCode",{parentName:"p"},"webpack")," 的加载器。当您将其视为函数时, 从右到左的规则更容易记住。您可以根据此规则将定义 ",Object(s.b)("mark",null,"use: ",'["style-loader", "css-loader"]')," 解析为 ",Object(s.b)("mark",null,"style(css(input))"),"。"),Object(s.b)("p",null,"要理解规则, 请参考以下示例:"),Object(s.b)("div",{className:"rcpress-highlight","data-language":"js"},Object(s.b)("pre",o({parentName:"div"},{className:"language-js"}),Object(s.b)("code",o({parentName:"pre"},{className:"language-js"}),Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),"{"),"\n  test",Object(s.b)("span",o({parentName:"code"},{className:"token operator"}),":")," ",Object(s.b)("span",o({parentName:"code"},{className:"token regex"}),"/\\.css$/"),Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),","),"\n  use",Object(s.b)("span",o({parentName:"code"},{className:"token operator"}),":")," ",Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),"["),Object(s.b)("span",o({parentName:"code"},{className:"token string"}),'"style-loader"'),Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),",")," ",Object(s.b)("span",o({parentName:"code"},{className:"token string"}),'"css-loader"'),Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),"]"),Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),","),"\n",Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),"}"),Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),",")))),Object(s.b)("p",null,"根据从右到左的规则, 在保持等效的情况下可以拆分示例为:"),Object(s.b)("div",{className:"rcpress-highlight","data-language":"js"},Object(s.b)("pre",o({parentName:"div"},{className:"language-js"}),Object(s.b)("code",o({parentName:"pre"},{className:"language-js"}),Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),"{"),"\n  test",Object(s.b)("span",o({parentName:"code"},{className:"token operator"}),":")," ",Object(s.b)("span",o({parentName:"code"},{className:"token regex"}),"/\\.css$/"),Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),","),"\n  use",Object(s.b)("span",o({parentName:"code"},{className:"token operator"}),":")," ",Object(s.b)("span",o({parentName:"code"},{className:"token string"}),'"style-loader"'),Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),","),"\n",Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),"}"),Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),","),"\n",Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),"{"),"\n  test",Object(s.b)("span",o({parentName:"code"},{className:"token operator"}),":")," ",Object(s.b)("span",o({parentName:"code"},{className:"token regex"}),"/\\.css$/"),Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),","),"\n  use",Object(s.b)("span",o({parentName:"code"},{className:"token operator"}),":")," ",Object(s.b)("span",o({parentName:"code"},{className:"token string"}),'"css-loader"'),Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),","),"\n",Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),"}"),Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),",")))),Object(s.b)("h3",{className:"__internal",id:"强制执行"},"强制执行",Object(s.b)("a",o({parentName:"h3"},{href:"#%E5%BC%BA%E5%88%B6%E6%89%A7%E8%A1%8C","aria-hidden":!0,className:"anchor"}),"#")),Object(s.b)("p",null,"即使可以使用上面的规则开发任意配置, 也可以方便地在常规规则之前或之后强制应用特定的规则。",Object(s.b)("mark",null,"enforce")," 字段在这里可以派上用场。它可以设置为 ",Object(s.b)("inlineCode",{parentName:"p"},"pre")," 或 ",Object(s.b)("inlineCode",{parentName:"p"},"post"),", 以便在其他加载程序之前或之后执行处理。"),Object(s.b)("p",null,Object(s.b)("inlineCode",{parentName:"p"},"Linting")," 是一个很好的例子, 因为构建应该在执行其他操作之前失败。使用 ",Object(s.b)("mark",null,'enforce:"post"')," 情况很少见, 这意味着您希望对构建的源代码执行检查。对构建的源代码执行分析是一个潜在的例子。"),Object(s.b)("p",null,"基本语法如下:"),Object(s.b)("div",{className:"rcpress-highlight","data-language":"js"},Object(s.b)("pre",o({parentName:"div"},{className:"language-js"}),Object(s.b)("code",o({parentName:"pre"},{className:"language-js"}),Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",Object(s.b)("span",o({parentName:"code"},{className:"token comment"}),"// Conditions"),"\n  test",Object(s.b)("span",o({parentName:"code"},{className:"token operator"}),":")," ",Object(s.b)("span",o({parentName:"code"},{className:"token regex"}),"/\\.js$/"),Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),","),"\n  enforce",Object(s.b)("span",o({parentName:"code"},{className:"token operator"}),":")," ",Object(s.b)("span",o({parentName:"code"},{className:"token string"}),'"pre"'),Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),",")," ",Object(s.b)("span",o({parentName:"code"},{className:"token comment"}),'// "post" too'),"\n\n  ",Object(s.b)("span",o({parentName:"code"},{className:"token comment"}),"// Actions"),"\n  use",Object(s.b)("span",o({parentName:"code"},{className:"token operator"}),":")," ",Object(s.b)("span",o({parentName:"code"},{className:"token string"}),'"eslint-loader"'),Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),","),"\n",Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),"}"),Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),",")))),Object(s.b)("p",null,"如果您小心地将声明与其他与测试相关的加载器链接起来, 则可以在不使用 ",Object(s.b)("inlineCode",{parentName:"p"},"enforce")," 的情况下编写相同的配置。而使用 ",Object(s.b)("inlineCode",{parentName:"p"},"enforce")," 消除了这样做的必要性, 并允许您将加载器的执行拆分为更易于组合的单独阶段。"),Object(s.b)("h3",{className:"__internal",id:"将参数传递给加载器"},"将参数传递给加载器",Object(s.b)("a",o({parentName:"h3"},{href:"#%E5%B0%86%E5%8F%82%E6%95%B0%E4%BC%A0%E9%80%92%E7%BB%99%E5%8A%A0%E8%BD%BD%E5%99%A8","aria-hidden":!0,className:"anchor"}),"#")),Object(s.b)("p",null,"有一种查询格式, 允许将参数传递给加载器:"),Object(s.b)("div",{className:"rcpress-highlight","data-language":"js"},Object(s.b)("pre",o({parentName:"div"},{className:"language-js"}),Object(s.b)("code",o({parentName:"pre"},{className:"language-js"}),Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",Object(s.b)("span",o({parentName:"code"},{className:"token comment"}),"// Conditions"),"\n  test",Object(s.b)("span",o({parentName:"code"},{className:"token operator"}),":")," ",Object(s.b)("span",o({parentName:"code"},{className:"token regex"}),"/\\.js$/"),Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),","),"\n  include",Object(s.b)("span",o({parentName:"code"},{className:"token operator"}),":")," ",Object(s.b)("span",o({parentName:"code"},{className:"token constant"}),"PATHS"),Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),"."),"app",Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),","),"\n\n  ",Object(s.b)("span",o({parentName:"code"},{className:"token comment"}),"// Actions"),"\n  use",Object(s.b)("span",o({parentName:"code"},{className:"token operator"}),":")," ",Object(s.b)("span",o({parentName:"code"},{className:"token string"}),'"babel-loader?presets[]=env"'),Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),","),"\n",Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),"}"),Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),",")))),Object(s.b)("p",null,"这种类型的配置也适用于入口和源代码导入, 因为 ",Object(s.b)("inlineCode",{parentName:"p"},"webpack")," 会处理它。这种格式在某些个别情况下很方便, 但通常最好使用可读性更强的替代方案。"),Object(s.b)("p",null,"最好使用 ",Object(s.b)("mark",null,"use"),":"),Object(s.b)("div",{className:"rcpress-highlight","data-language":"js"},Object(s.b)("pre",o({parentName:"div"},{className:"language-js"}),Object(s.b)("code",o({parentName:"pre"},{className:"language-js"}),Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",Object(s.b)("span",o({parentName:"code"},{className:"token comment"}),"// Conditions"),"\n  test",Object(s.b)("span",o({parentName:"code"},{className:"token operator"}),":")," ",Object(s.b)("span",o({parentName:"code"},{className:"token regex"}),"/\\.js$/"),Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),","),"\n  include",Object(s.b)("span",o({parentName:"code"},{className:"token operator"}),":")," ",Object(s.b)("span",o({parentName:"code"},{className:"token constant"}),"PATHS"),Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),"."),"app",Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),","),"\n\n  ",Object(s.b)("span",o({parentName:"code"},{className:"token comment"}),"// Actions"),"\n  use",Object(s.b)("span",o({parentName:"code"},{className:"token operator"}),":")," ",Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),"{"),"\n    loader",Object(s.b)("span",o({parentName:"code"},{className:"token operator"}),":")," ",Object(s.b)("span",o({parentName:"code"},{className:"token string"}),'"babel-loader"'),Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),","),"\n    options",Object(s.b)("span",o({parentName:"code"},{className:"token operator"}),":")," ",Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),"{"),"\n      presets",Object(s.b)("span",o({parentName:"code"},{className:"token operator"}),":")," ",Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),"["),Object(s.b)("span",o({parentName:"code"},{className:"token string"}),'"env"'),Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),"]"),Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),","),"\n    ",Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),"}"),Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),","),"\n  ",Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),"}"),Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),","),"\n",Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),"}"),Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),",")))),Object(s.b)("p",null,"如果要使用多个加载器, 可以将一个数组传递到 ",Object(s.b)("inlineCode",{parentName:"p"},"use")," 并从那里进行扩展:"),Object(s.b)("div",{className:"rcpress-highlight","data-language":"js"},Object(s.b)("pre",o({parentName:"div"},{className:"language-js"}),Object(s.b)("code",o({parentName:"pre"},{className:"language-js"}),Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),"{"),"\n  test",Object(s.b)("span",o({parentName:"code"},{className:"token operator"}),":")," ",Object(s.b)("span",o({parentName:"code"},{className:"token regex"}),"/\\.js$/"),Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),","),"\n  include",Object(s.b)("span",o({parentName:"code"},{className:"token operator"}),":")," ",Object(s.b)("span",o({parentName:"code"},{className:"token constant"}),"PATHS"),Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),"."),"app",Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),","),"\n  use",Object(s.b)("span",o({parentName:"code"},{className:"token operator"}),":")," ",Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),"["),"\n    ",Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),"{"),"\n      loader",Object(s.b)("span",o({parentName:"code"},{className:"token operator"}),":")," ",Object(s.b)("span",o({parentName:"code"},{className:"token string"}),'"babel-loader"'),Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),","),"\n      options",Object(s.b)("span",o({parentName:"code"},{className:"token operator"}),":")," ",Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),"{"),"\n        presets",Object(s.b)("span",o({parentName:"code"},{className:"token operator"}),":")," ",Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),"["),Object(s.b)("span",o({parentName:"code"},{className:"token string"}),'"env"'),Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),"]"),Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),","),"\n      ",Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),"}"),Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),","),"\n    ",Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),"}"),Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),","),"\n  ",Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),"]"),Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),","),"\n",Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),"}"),Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),",")))),Object(s.b)("h3",{className:"__internal",id:"内联定义"},"内联定义",Object(s.b)("a",o({parentName:"h3"},{href:"#%E5%86%85%E8%81%94%E5%AE%9A%E4%B9%89","aria-hidden":!0,className:"anchor"}),"#")),Object(s.b)("p",null,"即便最好使用配置级别的加载器定义, 也可以内联编写加载器定义:"),Object(s.b)("div",{className:"rcpress-highlight","data-language":"js"},Object(s.b)("pre",o({parentName:"div"},{className:"language-js"}),Object(s.b)("code",o({parentName:"pre"},{className:"language-js"}),Object(s.b)("span",o({parentName:"code"},{className:"token comment"}),"// Process foo.png through url-loader and other possible ones."),"\n",Object(s.b)("span",o({parentName:"code"},{className:"token keyword"}),"import")," ",Object(s.b)("span",o({parentName:"code"},{className:"token string"}),'"url-loader!./foo.png"'),Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),";"),"\n\n",Object(s.b)("span",o({parentName:"code"},{className:"token comment"}),"// Override possible higher level match completely"),"\n",Object(s.b)("span",o({parentName:"code"},{className:"token keyword"}),"import")," ",Object(s.b)("span",o({parentName:"code"},{className:"token string"}),'"!!url-loader!./bar.png"'),Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),";")))),Object(s.b)("p",null,"这种方法的问题在于它将源代码与 ",Object(s.b)("inlineCode",{parentName:"p"},"webpack")," 部分耦合在一起。尽管如此, 这仍然是一种可以了解的形式。"),Object(s.b)("p",null,"由于配置入口采用相同的机制, 因此相同的形式也可以在这里工作:"),Object(s.b)("div",{className:"rcpress-highlight","data-language":"js"},Object(s.b)("pre",o({parentName:"div"},{className:"language-js"}),Object(s.b)("code",o({parentName:"pre"},{className:"language-js"}),Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),"{"),"\n  entry",Object(s.b)("span",o({parentName:"code"},{className:"token operator"}),":")," ",Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),"{"),"\n    app",Object(s.b)("span",o({parentName:"code"},{className:"token operator"}),":")," ",Object(s.b)("span",o({parentName:"code"},{className:"token string"}),'"babel-loader!./app"'),Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),","),"\n  ",Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),"}"),Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),","),"\n",Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),"}"),Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),",")))),Object(s.b)("h3",{className:"__internal",id:"其他匹配文件的方法"},"其他匹配文件的方法",Object(s.b)("a",o({parentName:"h3"},{href:"#%E5%85%B6%E4%BB%96%E5%8C%B9%E9%85%8D%E6%96%87%E4%BB%B6%E7%9A%84%E6%96%B9%E6%B3%95","aria-hidden":!0,className:"anchor"}),"#")),Object(s.b)("p",null,Object(s.b)("inlineCode",{parentName:"p"},"test")," 结合 ",Object(s.b)("mark",null,"include")," 或 ",Object(s.b)("mark",null,"exclude")," 来约束匹配是最常用的文件匹配方法。它们接受下面列出的数据类型:"),Object(s.b)("ul",null,Object(s.b)("li",o({parentName:"ul"},{className:"__internal"}),Object(s.b)("inlineCode",{parentName:"li"},"test"),": 匹配 ",Object(s.b)("inlineCode",{parentName:"li"},"RegExp"),"、字符串、函数、对象或类似的条件数组。"),Object(s.b)("li",o({parentName:"ul"},{className:"__internal"}),Object(s.b)("inlineCode",{parentName:"li"},"include"),": 同上。"),Object(s.b)("li",o({parentName:"ul"},{className:"__internal"}),Object(s.b)("inlineCode",{parentName:"li"},"exclude"),": 同上, 但输出与 ",Object(s.b)("inlineCode",{parentName:"li"},"include")," 相反。"),Object(s.b)("li",o({parentName:"ul"},{className:"__internal"}),Object(s.b)("inlineCode",{parentName:"li"},"resource: /inline/"),": 与包含查询的资源路径匹配。如: ",Object(s.b)("inlineCode",{parentName:"li"},"/path/foo.inline.js"),", ",Object(s.b)("inlineCode",{parentName:"li"},"/path/bar.png?inline"),"。"),Object(s.b)("li",o({parentName:"ul"},{className:"__internal"}),Object(s.b)("inlineCode",{parentName:"li"},"issuer: /bar.js/"),": 根据从匹配中请求的资源进行匹配。如: 如果是从 ",Object(s.b)("inlineCode",{parentName:"li"},"/path/bar.js")," 请求的, 则将匹配 ",Object(s.b)("inlineCode",{parentName:"li"},"/path/foo.png"),"。"),Object(s.b)("li",o({parentName:"ul"},{className:"__internal"}),Object(s.b)("inlineCode",{parentName:"li"},"resourcePath: /inline/"),": 在没有查询的情况下与资源路径匹配。如: ",Object(s.b)("inlineCode",{parentName:"li"},"/path/foo.inline.png"),"。"),Object(s.b)("li",o({parentName:"ul"},{className:"__internal"}),Object(s.b)("inlineCode",{parentName:"li"},"resourceQuery: /inline/"),": 根据其查询与资源匹配。如: ",Object(s.b)("inlineCode",{parentName:"li"},"/path/foo.png?inline"),"。")),Object(s.b)("p",null,"基于布尔的字段可以用来进一步约束这些匹配器:"),Object(s.b)("ul",null,Object(s.b)("li",o({parentName:"ul"},{className:"__internal"}),Object(s.b)("inlineCode",{parentName:"li"},"not"),": 不符合条件(请参阅参考 ",Object(s.b)("inlineCode",{parentName:"li"},"test")," 以获取可接受的值)"),Object(s.b)("li",o({parentName:"ul"},{className:"__internal"}),Object(s.b)("inlineCode",{parentName:"li"},"and"),": 与一系列条件匹配。所有必须匹配。"),Object(s.b)("li",o({parentName:"ul"},{className:"__internal"}),Object(s.b)("inlineCode",{parentName:"li"},"or"),": 与数组匹配。至少匹配一项。")),Object(s.b)("h3",{className:"__internal",id:"在-use-处使用函数进行分支"},"在 use 处使用函数进行分支",Object(s.b)("a",o({parentName:"h3"},{href:"#%E5%9C%A8-use-%E5%A4%84%E4%BD%BF%E7%94%A8%E5%87%BD%E6%95%B0%E8%BF%9B%E8%A1%8C%E5%88%86%E6%94%AF","aria-hidden":!0,className:"anchor"}),"#")),Object(s.b)("p",null,"在本书配置中, 您可以在更高级别上编写配置。实现类似结果的另一个选择是使用分支, 因为 ",Object(s.b)("inlineCode",{parentName:"p"},"webpack")," 的加载器定义允许接受您根据环境进行分支的函数。参考下面的例子:"),Object(s.b)("div",{className:"rcpress-highlight","data-language":"js"},Object(s.b)("pre",o({parentName:"div"},{className:"language-js"}),Object(s.b)("code",o({parentName:"pre"},{className:"language-js"}),Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),"{"),"\n  test",Object(s.b)("span",o({parentName:"code"},{className:"token operator"}),":")," ",Object(s.b)("span",o({parentName:"code"},{className:"token regex"}),"/\\.css$/"),Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),","),"\n\n  ",Object(s.b)("span",o({parentName:"code"},{className:"token comment"}),"// `resource` refers to the resource path matched."),"\n  ",Object(s.b)("span",o({parentName:"code"},{className:"token comment"}),"// `resourceQuery` contains possible query passed to it"),"\n  ",Object(s.b)("span",o({parentName:"code"},{className:"token comment"}),"// `issuer` tells about match context path"),"\n  ",Object(s.b)("span",o({parentName:"code"},{className:"token function-variable function"}),"use"),Object(s.b)("span",o({parentName:"code"},{className:"token operator"}),":")," ",Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),"("),Object(s.b)("span",o({parentName:"code"},{className:"token parameter"}),Object(s.b)("span",o({parentName:"span"},{className:"token punctuation"}),"{")," resource",Object(s.b)("span",o({parentName:"span"},{className:"token punctuation"}),",")," resourceQuery",Object(s.b)("span",o({parentName:"span"},{className:"token punctuation"}),",")," issuer ",Object(s.b)("span",o({parentName:"span"},{className:"token punctuation"}),"}")),Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),")")," ",Object(s.b)("span",o({parentName:"code"},{className:"token operator"}),"=>")," ",Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),"{"),"\n    ",Object(s.b)("span",o({parentName:"code"},{className:"token comment"}),"// You have to return something falsy, object, or a"),"\n    ",Object(s.b)("span",o({parentName:"code"},{className:"token comment"}),'// string (i.e., "style-loader") from here.'),"\n    ",Object(s.b)("span",o({parentName:"code"},{className:"token comment"}),"//"),"\n    ",Object(s.b)("span",o({parentName:"code"},{className:"token comment"}),"// Returning an array fails! Nest rules instead."),"\n    ",Object(s.b)("span",o({parentName:"code"},{className:"token keyword"}),"if")," ",Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),"("),"env ",Object(s.b)("span",o({parentName:"code"},{className:"token operator"}),"===")," ",Object(s.b)("span",o({parentName:"code"},{className:"token string"}),'"development"'),Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),")")," ",Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),"{"),"\n      ",Object(s.b)("span",o({parentName:"code"},{className:"token keyword"}),"return")," ",Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),"{"),"\n        use",Object(s.b)("span",o({parentName:"code"},{className:"token operator"}),":")," ",Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),"{"),"\n          loader",Object(s.b)("span",o({parentName:"code"},{className:"token operator"}),":")," ",Object(s.b)("span",o({parentName:"code"},{className:"token string"}),'"css-loader"'),Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),",")," ",Object(s.b)("span",o({parentName:"code"},{className:"token comment"}),"// css-loader first"),"\n          rules",Object(s.b)("span",o({parentName:"code"},{className:"token operator"}),":")," ",Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),"["),"\n            ",Object(s.b)("span",o({parentName:"code"},{className:"token string"}),'"style-loader"'),Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),",")," ",Object(s.b)("span",o({parentName:"code"},{className:"token comment"}),"// style-loader after"),"\n          ",Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),"]"),Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),","),"\n        ",Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),"}"),Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),","),"\n      ",Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),"}"),Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),";"),"\n    ",Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),"}"),"\n  ",Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),"}"),Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),","),"\n",Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),"}"),Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),",")))),Object(s.b)("p",null,"仔细应用, 这种技术允许使用不同的组合方式。"),Object(s.b)("h3",{className:"__internal",id:"基于-issuer-加载"},"基于 issuer 加载",Object(s.b)("a",o({parentName:"h3"},{href:"#%E5%9F%BA%E4%BA%8E-issuer-%E5%8A%A0%E8%BD%BD","aria-hidden":!0,className:"anchor"}),"#")),Object(s.b)("p",null,Object(s.b)("inlineCode",{parentName:"p"},"issuer")," 可用于根据导入资源的位置来控制行为。在以下改编自 ",Object(s.b)("a",o({parentName:"p"},{href:"https://github.com/webpack-contrib/css-loader/pull/287#issuecomment-261269199",target:"_blank"}),"css-loader issue 287")," 的示例中, 当 ",Object(s.b)("inlineCode",{parentName:"p"},"webpack")," 从 ",Object(s.b)("inlineCode",{parentName:"p"},"JavaScript")," 导入捕获 ",Object(s.b)("inlineCode",{parentName:"p"},"css")," 文件时, 将应用 ",Object(s.b)("inlineCode",{parentName:"p"},"style-loader"),":"),Object(s.b)("div",{className:"rcpress-highlight","data-language":"js"},Object(s.b)("pre",o({parentName:"div"},{className:"language-js"}),Object(s.b)("code",o({parentName:"pre"},{className:"language-js"}),Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),"{"),"\n  test",Object(s.b)("span",o({parentName:"code"},{className:"token operator"}),":")," ",Object(s.b)("span",o({parentName:"code"},{className:"token regex"}),"/\\.css$/"),Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),","),"\n  rules",Object(s.b)("span",o({parentName:"code"},{className:"token operator"}),":")," ",Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),"["),"\n    ",Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),"{"),"\n      issuer",Object(s.b)("span",o({parentName:"code"},{className:"token operator"}),":")," ",Object(s.b)("span",o({parentName:"code"},{className:"token regex"}),"/\\.js$/"),Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),","),"\n      use",Object(s.b)("span",o({parentName:"code"},{className:"token operator"}),":")," ",Object(s.b)("span",o({parentName:"code"},{className:"token string"}),'"style-loader"'),Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),","),"\n    ",Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),"}"),Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),","),"\n    ",Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),"{"),"\n      use",Object(s.b)("span",o({parentName:"code"},{className:"token operator"}),":")," ",Object(s.b)("span",o({parentName:"code"},{className:"token string"}),'"css-loader"'),Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),","),"\n    ",Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),"}"),Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),","),"\n  ",Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),"]"),Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),","),"\n",Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),"}"),Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),",")))),Object(s.b)("p",null,"另一种方式是组合 ",Object(s.b)("inlineCode",{parentName:"p"},"issuer")," 和 ",Object(s.b)("inlineCode",{parentName:"p"},"not"),":"),Object(s.b)("div",{className:"rcpress-highlight","data-language":"js"},Object(s.b)("pre",o({parentName:"div"},{className:"language-js"}),Object(s.b)("code",o({parentName:"pre"},{className:"language-js"}),Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),"{"),"\n  test",Object(s.b)("span",o({parentName:"code"},{className:"token operator"}),":")," ",Object(s.b)("span",o({parentName:"code"},{className:"token regex"}),"/\\.css$/"),Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),","),"\n  rules",Object(s.b)("span",o({parentName:"code"},{className:"token operator"}),":")," ",Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),"["),"\n    ",Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),"{")," ",Object(s.b)("span",o({parentName:"code"},{className:"token comment"}),"// CSS imported from other modules is added to the DOM"),"\n      issuer",Object(s.b)("span",o({parentName:"code"},{className:"token operator"}),":")," ",Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),"{")," not",Object(s.b)("span",o({parentName:"code"},{className:"token operator"}),":")," ",Object(s.b)("span",o({parentName:"code"},{className:"token regex"}),"/\\.css$/")," ",Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),"}"),Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),","),"\n      use",Object(s.b)("span",o({parentName:"code"},{className:"token operator"}),":")," ",Object(s.b)("span",o({parentName:"code"},{className:"token string"}),'"style-loader"'),Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),","),"\n    ",Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),"}"),Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),","),"\n    ",Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),"{")," ",Object(s.b)("span",o({parentName:"code"},{className:"token comment"}),"// Apply css-loader against CSS imports to return CSS"),"\n      use",Object(s.b)("span",o({parentName:"code"},{className:"token operator"}),":")," ",Object(s.b)("span",o({parentName:"code"},{className:"token string"}),'"css-loader"'),Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),","),"\n    ",Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),"}"),Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),","),"\n  ",Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),"]"),Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),","),"\n",Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),"}")))),Object(s.b)("h3",{className:"__internal",id:"使用-info-对象加载"},"使用 info 对象加载",Object(s.b)("a",o({parentName:"h3"},{href:"#%E4%BD%BF%E7%94%A8-info-%E5%AF%B9%E8%B1%A1%E5%8A%A0%E8%BD%BD","aria-hidden":!0,className:"anchor"}),"#")),Object(s.b)("p",null,"如果您将函数作为 ",Object(s.b)("mark",null,"use")," 字段的加载器定义传递给 ",Object(s.b)("inlineCode",{parentName:"p"},"webpack"),", ",Object(s.b)("inlineCode",{parentName:"p"},"webpack")," 将提供对编译的高级访问。它希望您从调用中返回加载器:"),Object(s.b)("div",{className:"rcpress-highlight","data-language":"js"},Object(s.b)("pre",o({parentName:"div"},{className:"language-js"}),Object(s.b)("code",o({parentName:"pre"},{className:"language-js"}),Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),"{"),"\n  rules",Object(s.b)("span",o({parentName:"code"},{className:"token operator"}),":")," ",Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),"["),"\n    ",Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),"{"),"\n      test",Object(s.b)("span",o({parentName:"code"},{className:"token operator"}),":")," ",Object(s.b)("span",o({parentName:"code"},{className:"token regex"}),"/\\.js$/"),Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),","),"\n      include",Object(s.b)("span",o({parentName:"code"},{className:"token operator"}),":")," ",Object(s.b)("span",o({parentName:"code"},{className:"token constant"}),"PATHS"),Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),"."),"app",Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),","),"\n      use",Object(s.b)("span",o({parentName:"code"},{className:"token operator"}),":")," ",Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),"["),"\n        ",Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),"("),Object(s.b)("span",o({parentName:"code"},{className:"token parameter"}),"info"),Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),")")," ",Object(s.b)("span",o({parentName:"code"},{className:"token operator"}),"=>"),"\n          console",Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),"."),Object(s.b)("span",o({parentName:"code"},{className:"token function"}),"log"),Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),"("),"info",Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),")")," ",Object(s.b)("span",o({parentName:"code"},{className:"token operator"}),"||")," ",Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),"{"),"\n            loader",Object(s.b)("span",o({parentName:"code"},{className:"token operator"}),":")," ",Object(s.b)("span",o({parentName:"code"},{className:"token string"}),'"babel-loader"'),Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),","),"\n            options",Object(s.b)("span",o({parentName:"code"},{className:"token operator"}),":")," ",Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),"{"),"\n              presets",Object(s.b)("span",o({parentName:"code"},{className:"token operator"}),":")," ",Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),"["),Object(s.b)("span",o({parentName:"code"},{className:"token string"}),'"env"'),Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),"]"),Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),","),"\n            ",Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),"}"),Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),","),"\n          ",Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),"}"),Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),","),"\n      ",Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),"]"),Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),","),"\n    ",Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),"}"),Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),","),"\n  ",Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),"]"),Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),";"),"\n",Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),"}")))),Object(s.b)("p",null,"如果执行此代码, 您将在控制台中看到打印内容:"),Object(s.b)("div",{className:"rcpress-highlight","data-language":"bash"},Object(s.b)("pre",o({parentName:"div"},{className:"language-bash"}),Object(s.b)("code",o({parentName:"pre"},{className:"language-bash"}),Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),"{"),"\n  resource: ",Object(s.b)("span",o({parentName:"code"},{className:"token string"}),"'/webpack-demo/src/main.css'"),",\n  realResource: ",Object(s.b)("span",o({parentName:"code"},{className:"token string"}),"'/webpack-demo/src/main.css'"),",\n  resourceQuery: ",Object(s.b)("span",o({parentName:"code"},{className:"token string"}),"''"),",\n  issuer: ",Object(s.b)("span",o({parentName:"code"},{className:"token string"}),"''"),",\n  compiler: ",Object(s.b)("span",o({parentName:"code"},{className:"token string"}),"'mini-css-extract-plugin /webpack-demo/node_modules/css-loader/dist/cjs.js!/webpack-demo/node_modules/postcss-loader/src/index.js??ref--4-2!/webpack-demo/node_modules/postcss-loader/src/index.js??ref--4-3!/webpack-demo/src/main.css'"),"\n",Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),"}")))),Object(s.b)("p",null,"该函数是一个逃生舱口, 用于进一步定制加载器。"),Object(s.b)("h3",{className:"__internal",id:"基于-resourcequery-加载"},"基于 resourceQuery 加载",Object(s.b)("a",o({parentName:"h3"},{href:"#%E5%9F%BA%E4%BA%8E-resourcequery-%E5%8A%A0%E8%BD%BD","aria-hidden":!0,className:"anchor"}),"#")),Object(s.b)("p",null,Object(s.b)("inlineCode",{parentName:"p"},"oneOf")," 字段可以根据与资源相关的匹配将 ",Object(s.b)("inlineCode",{parentName:"p"},"webpack")," 路由到特定的加载器:"),Object(s.b)("div",{className:"rcpress-highlight","data-language":"js"},Object(s.b)("pre",o({parentName:"div"},{className:"language-js"}),Object(s.b)("code",o({parentName:"pre"},{className:"language-js"}),Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),"{"),"\n  test",Object(s.b)("span",o({parentName:"code"},{className:"token operator"}),":")," ",Object(s.b)("span",o({parentName:"code"},{className:"token regex"}),"/\\.png$/"),Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),","),"\n  oneOf",Object(s.b)("span",o({parentName:"code"},{className:"token operator"}),":")," ",Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),"["),"\n    ",Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),"{"),"\n      resourceQuery",Object(s.b)("span",o({parentName:"code"},{className:"token operator"}),":")," ",Object(s.b)("span",o({parentName:"code"},{className:"token regex"}),"/inline/"),Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),","),"\n      use",Object(s.b)("span",o({parentName:"code"},{className:"token operator"}),":")," ",Object(s.b)("span",o({parentName:"code"},{className:"token string"}),'"url-loader"'),Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),","),"\n    ",Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),"}"),Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),","),"\n    ",Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),"{"),"\n      resourceQuery",Object(s.b)("span",o({parentName:"code"},{className:"token operator"}),":")," ",Object(s.b)("span",o({parentName:"code"},{className:"token regex"}),"/external/"),Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),","),"\n      use",Object(s.b)("span",o({parentName:"code"},{className:"token operator"}),":")," ",Object(s.b)("span",o({parentName:"code"},{className:"token string"}),'"file-loader"'),Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),","),"\n    ",Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),"}"),Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),","),"\n  ",Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),"]"),Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),","),"\n",Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),"}"),Object(s.b)("span",o({parentName:"code"},{className:"token punctuation"}),",")))),Object(s.b)("p",null,"如果要将上下文信息嵌入到文件名中, 则规则可以使用 ",Object(s.b)("inlineCode",{parentName:"p"},"resourcePath")," 而不是 ",Object(s.b)("inlineCode",{parentName:"p"},"resourceQuery"),"。"),Object(s.b)("h3",{className:"__internal",id:"了解加载器行为"},"了解加载器行为",Object(s.b)("a",o({parentName:"h3"},{href:"#%E4%BA%86%E8%A7%A3%E5%8A%A0%E8%BD%BD%E5%99%A8%E8%A1%8C%E4%B8%BA","aria-hidden":!0,className:"anchor"}),"#")),Object(s.b)("p",null,"通过检查装载机的行为可以更详细地了解它们。",Object(s.b)("a",o({parentName:"p"},{href:"https://www.npmjs.com/package/loader-runner",target:"_blank"}),"loader-runner")," 使您无需 ",Object(s.b)("inlineCode",{parentName:"p"},"webpack")," 即可独立运行它们。",Object(s.b)("inlineCode",{parentName:"p"},"Webpack")," 在内部使用此软件包, 在",Object(s.b)("a",o({parentName:"p"},{href:""}),"使用加载器扩展"),"一章详细介绍了该软件包。"),Object(s.b)("p",null,Object(s.b)("a",o({parentName:"p"},{href:"https://www.npmjs.com/package/inspect-loader",target:"_blank"}),"inspect-loader")," 可让您检查加载器之间传递的内容。您无需将 ",Object(s.b)("inlineCode",{parentName:"p"},"console.log")," 插入 ",Object(s.b)("inlineCode",{parentName:"p"},"node_modules"),", 您可以将此加载器附加到您的配置中并检查其中的流程。"),Object(s.b)("h3",{className:"__internal",id:"结论"},"结论",Object(s.b)("a",o({parentName:"h3"},{href:"#%E7%BB%93%E8%AE%BA","aria-hidden":!0,className:"anchor"}),"#")),Object(s.b)("p",null,Object(s.b)("inlineCode",{parentName:"p"},"Webpack")," 提供了多种配置加载器的方法, 但是从 ",Object(s.b)("inlineCode",{parentName:"p"},"webpack 4")," 开始, 坚持 ",Object(s.b)("inlineCode",{parentName:"p"},"use")," 就足够了。注意加载器的顺序, 因为这是常见的问题来源。"),Object(s.b)("p",null,"回归一下:"),Object(s.b)("ul",null,Object(s.b)("li",o({parentName:"ul"},{className:"__internal"}),Object(s.b)("strong",{parentName:"li"},"加载器"),"允许您确定当 ",Object(s.b)("inlineCode",{parentName:"li"},"webpack")," 的模块解析机制遇到文件时应该如何处理。"),Object(s.b)("li",o({parentName:"ul"},{className:"__internal"}),"加载器定义由要匹配的",Object(s.b)("strong",{parentName:"li"},"条件"),"和匹配发生时应执行的",Object(s.b)("strong",{parentName:"li"},"操作"),"组成。"),Object(s.b)("li",o({parentName:"ul"},{className:"__internal"}),Object(s.b)("inlineCode",{parentName:"li"},"Webpack")," 提供了多种匹配和更改加载器行为的方式。例如, 您可以在匹配加载器之后根据",Object(s.b)("strong",{parentName:"li"},"资源查询"),"进行匹配, 并将加载器路由到特定操作。")),Object(s.b)("p",null,"在下一章中, 您将学习使用 ",Object(s.b)("inlineCode",{parentName:"p"},"webpack")," 加载图片。"))}i.isMDXComponent=!0,i=Object(c.hot)(e)(i),(b="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(b.register(m,"makeShortcode","/Users/yuzhoujie/Desktop/work/webpack-book-china/docs/webpack/Loading/loader-definitions.md"),b.register(N,"MdAlert","/Users/yuzhoujie/Desktop/work/webpack-book-china/docs/webpack/Loading/loader-definitions.md"),b.register(l,"layoutProps","/Users/yuzhoujie/Desktop/work/webpack-book-china/docs/webpack/Loading/loader-definitions.md"),b.register("wrapper","MDXLayout","/Users/yuzhoujie/Desktop/work/webpack-book-china/docs/webpack/Loading/loader-definitions.md"),b.register(i,"MDXContent","/Users/yuzhoujie/Desktop/work/webpack-book-china/docs/webpack/Loading/loader-definitions.md")),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&r(e)}.call(this,n(21)(e))}}]);