(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{135:function(e,a,t){"use strict";t.r(a),function(e){t.d(a,"default",(function(){return d}));var n,c=t(86),o=(t(127),t(0),t(87));function p(){return(p=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}function b(e,a){if(null==e)return{};var t,n,c=function(e,a){if(null==e)return{};var t,n,c={},o=Object.keys(e);for(n=0;n<o.length;n++)t=o[n],a.indexOf(t)>=0||(c[t]=e[t]);return c}(e,a);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)t=o[n],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(c[t]=e[t])}return c}(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var s,r,m=function(e){return function(a){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),Object(o.b)("div",a)}},l=m("MdAlert"),N={};function d(e){var a=e.components,t=b(e,["components"]);return Object(o.b)("wrapper",p({},N,t,{components:a,mdxType:"MDXLayout"}),Object(o.b)("h2",{className:"__internal",id:"模块热更新"},"模块热更新",Object(o.b)("a",p({parentName:"h2"},{href:"#%E6%A8%A1%E5%9D%97%E7%83%AD%E6%9B%B4%E6%96%B0","aria-hidden":!0,className:"anchor"}),"#")),Object(o.b)("p",null,"模块热更新(",Object(o.b)("inlineCode",{parentName:"p"},"HMR"),")建立在 ",Object(o.b)("inlineCode",{parentName:"p"},"WDS")," 之上。它启用了一个接口, 可以实时交换模块。例如, 样式加载器可以在不强制刷新的情况下更新 ",Object(o.b)("inlineCode",{parentName:"p"},"CSS"),"。为样式实现 ",Object(o.b)("inlineCode",{parentName:"p"},"HMR")," 是理想的, 因为 ",Object(o.b)("inlineCode",{parentName:"p"},"CSS")," 在设计上是无状态的。"),Object(o.b)("p",null,"在 ",Object(o.b)("inlineCode",{parentName:"p"},"JavaScript")," 也可以使用 ",Object(o.b)("inlineCode",{parentName:"p"},"HMR"),", 但是由于应用程序状态, 因此它更加难以实现。",Object(o.b)("a",p({parentName:"p"},{href:"https://www.npmjs.com/package/react-refresh-webpack-plugin",target:"_blank"}),"react-refresh-webpack-plugin")," 和 ",Object(o.b)("a",p({parentName:"p"},{href:"https://www.npmjs.com/package/vue-hot-reload-api",target:"_blank"}),"vue-hot-reload-api")," 是很好的例子。"),Object(o.b)(l,p({message:" ",type:"info"},{mdxType:"MdAlert"}),Object(o.b)("p",{parentName:"MdAlert"},"鉴于 ",Object(o.b)("inlineCode",{parentName:"p"},"HMR")," 实现起来可能很复杂, 一个不错的折衷方案是将应用程序状态存储到 ",Object(o.b)("mark",null,"localStorage"),", 刷新后根据该状态对应用程序进行补充。这样做会将问题推到应用程序端。")),Object(o.b)("h3",{className:"__internal",id:"启用-hmr"},"启用 HMR",Object(o.b)("a",p({parentName:"h3"},{href:"#%E5%90%AF%E7%94%A8-hmr","aria-hidden":!0,className:"anchor"}),"#")),Object(o.b)("p",null,"要启用 ",Object(o.b)("inlineCode",{parentName:"p"},"HMR"),", 需要启用以下步骤:"),Object(o.b)("ul",null,Object(o.b)("li",p({parentName:"ul"},{className:"__internal"}),"开发服务器必须在 ",Object(o.b)("mark",null,"hot")," 模式下运行, 才能将热模块替换界面公开给客户端。"),Object(o.b)("li",p({parentName:"ul"},{className:"__internal"}),Object(o.b)("inlineCode",{parentName:"li"},"Webpack")," 必须提供服务器的热更新, 可以使用 ",Object(o.b)("mark",null,"webpack.HotModuleReplacementPlugin")," 来实现。"),Object(o.b)("li",p({parentName:"ul"},{className:"__internal"}),"客户端必须运行开发服务器提供的特定脚本。它们将自动注入, 但可以通过入口配置显式启用。"),Object(o.b)("li",p({parentName:"ul"},{className:"__internal"}),"客户端必须通过 ",Object(o.b)("mark",null,"module.hot.accept")," 来实现 ",Object(o.b)("inlineCode",{parentName:"li"},"HMR")," 接口, 并有选择 ",Object(o.b)("mark",null,"module.hot.dispose")," 清理模块, 然后才可以进行替换。")),Object(o.b)("p",null,"使用 ",Object(o.b)("mark",null,"webpack-dev-server --hot")," 或在 ",Object(o.b)("mark",null,"hot")," 模式下运行 ",Object(o.b)("strong",{parentName:"p"},"webpack-plugin-servehot")," 可解决前两个问题。在这种情况下, 如果要更新 ",Object(o.b)("inlineCode",{parentName:"p"},"JavaScript")," 应用程序代码, 则只需自己处理最后一个。跳过 ",Object(o.b)("mark",null,"--hot")," 标志并进行 ",Object(o.b)("inlineCode",{parentName:"p"},"webpack")," 配置可具备更高的灵活性。"),Object(o.b)("p",null,"以下清单包含与此方法有关的基本部分。您必须从此处进行调整以匹配您的配置样式:"),Object(o.b)("div",{className:"rcpress-highlight","data-language":"js"},Object(o.b)("pre",p({parentName:"div"},{className:"language-js"}),Object(o.b)("code",p({parentName:"pre"},{className:"language-js"}),Object(o.b)("span",p({parentName:"code"},{className:"token punctuation"}),"{"),"\n  devServer",Object(o.b)("span",p({parentName:"code"},{className:"token operator"}),":")," ",Object(o.b)("span",p({parentName:"code"},{className:"token punctuation"}),"{"),"\n    ",Object(o.b)("span",p({parentName:"code"},{className:"token comment"}),"// Don't refresh if hot loading fails. Good while"),"\n    ",Object(o.b)("span",p({parentName:"code"},{className:"token comment"}),"// implementing the client interface."),"\n    hotOnly",Object(o.b)("span",p({parentName:"code"},{className:"token operator"}),":")," ",Object(o.b)("span",p({parentName:"code"},{className:"token boolean"}),"true"),Object(o.b)("span",p({parentName:"code"},{className:"token punctuation"}),","),"\n\n    ",Object(o.b)("span",p({parentName:"code"},{className:"token comment"}),"// If you want to refresh on errors too, set"),"\n    ",Object(o.b)("span",p({parentName:"code"},{className:"token comment"}),"// hot: true,"),"\n  ",Object(o.b)("span",p({parentName:"code"},{className:"token punctuation"}),"}"),Object(o.b)("span",p({parentName:"code"},{className:"token punctuation"}),","),"\n  plugins",Object(o.b)("span",p({parentName:"code"},{className:"token operator"}),":")," ",Object(o.b)("span",p({parentName:"code"},{className:"token punctuation"}),"["),"\n    ",Object(o.b)("span",p({parentName:"code"},{className:"token comment"}),"// Enable the plugin to let webpack communicate changes"),"\n    ",Object(o.b)("span",p({parentName:"code"},{className:"token comment"}),"// to WDS. --hot sets this automatically!"),"\n    ",Object(o.b)("span",p({parentName:"code"},{className:"token keyword"}),"new")," ",Object(o.b)("span",p({parentName:"code"},{className:"token class-name"}),"webpack",Object(o.b)("span",p({parentName:"span"},{className:"token punctuation"}),"."),"HotModuleReplacementPlugin"),Object(o.b)("span",p({parentName:"code"},{className:"token punctuation"}),"("),Object(o.b)("span",p({parentName:"code"},{className:"token punctuation"}),")"),Object(o.b)("span",p({parentName:"code"},{className:"token punctuation"}),","),"\n  ",Object(o.b)("span",p({parentName:"code"},{className:"token punctuation"}),"]"),Object(o.b)("span",p({parentName:"code"},{className:"token punctuation"}),","),"\n",Object(o.b)("span",p({parentName:"code"},{className:"token punctuation"}),"}")))),Object(o.b)("p",null,"如果在不实现客户端接口的情况下实现上述配置, 则很可能会出现错误:",Object(o.b)("br",{parentName:"p"}),"\n",Object(o.b)("img",p({parentName:"p"},{src:"../../hmr/hmr_error.png",alt:"不刷新"}))),Object(o.b)("p",null,"该消息表明, ",Object(o.b)("inlineCode",{parentName:"p"},"HMR")," 接口已向客户端部分通知了热更新代码, 但是未对其进行任何处理, 而这是下一步需要解决的问题。"),Object(o.b)(l,p({message:" ",type:"info"},{mdxType:"MdAlert"}),Object(o.b)("p",{parentName:"MdAlert"},"假定您已设置 ",Object(o.b)("mark",null,"optimization.moduleIds = 'named'"),"。如果您在 ",Object(o.b)("mark",null,"development")," 模式下运行 ",Object(o.b)("inlineCode",{parentName:"p"},"webpack"),", 默认情况下它将处于打开状态。")),Object(o.b)(l,p({message:" ",type:"warning"},{mdxType:"MdAlert"}),Object(o.b)("p",{parentName:"MdAlert"},"您",Object(o.b)("strong",{parentName:"p"},"不应该"),"为您的生产配置启用 ",Object(o.b)("inlineCode",{parentName:"p"},"HMR"),"。它可能有效, 但会使您的捆绑包超出其应有的大小。")),Object(o.b)(l,p({message:" ",type:"warning"},{mdxType:"MdAlert"}),Object(o.b)("p",{parentName:"MdAlert"},"如果您使用的是 ",Object(o.b)("inlineCode",{parentName:"p"},"Babel"),", 请对其进行配置, 允许生成 ",Object(o.b)("inlineCode",{parentName:"p"},"Webpack")," 控制模块, 否则 ",Object(o.b)("inlineCode",{parentName:"p"},"HMR")," 逻辑将无法工作! 有关确切设置, 请参见",Object(o.b)("a",p({parentName:"p"},{href:""}),'"加载JavaScript"'),"一章。")),Object(o.b)("h3",{className:"__internal",id:"实现-hmr-接口"},"实现 HMR 接口",Object(o.b)("a",p({parentName:"h3"},{href:"#%E5%AE%9E%E7%8E%B0-hmr-%E6%8E%A5%E5%8F%A3","aria-hidden":!0,className:"anchor"}),"#")),Object(o.b)("p",null,Object(o.b)("inlineCode",{parentName:"p"},"Webpack")," 通过全局变量 ",Object(o.b)("mark",null,"module.hot")," 公开 ",Object(o.b)("inlineCode",{parentName:"p"},"HMR")," 接口。它通过 ",Object(o.b)("mark",null,"module.hot.accept(","<","path to watch",">",", ","<","handler",">",")")," 功能提供更新, 您需要在那里更新应用程序。"),Object(o.b)("p",null,"以下实现体现了教程应用程序的思路:"),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"src/index.js")),Object(o.b)("div",{className:"rcpress-highlight","data-language":"js"},Object(o.b)("pre",p({parentName:"div"},{className:"language-js"}),Object(o.b)("code",p({parentName:"pre"},{className:"language-js"}),Object(o.b)("span",p({parentName:"code"},{className:"token keyword"}),"import")," component ",Object(o.b)("span",p({parentName:"code"},{className:"token keyword"}),"from")," ",Object(o.b)("span",p({parentName:"code"},{className:"token string"}),'"./component"'),Object(o.b)("span",p({parentName:"code"},{className:"token punctuation"}),";"),"\n\n",Object(o.b)("span",p({parentName:"code"},{className:"token keyword"}),"let")," demoComponent ",Object(o.b)("span",p({parentName:"code"},{className:"token operator"}),"=")," ",Object(o.b)("span",p({parentName:"code"},{className:"token function"}),"component"),Object(o.b)("span",p({parentName:"code"},{className:"token punctuation"}),"("),Object(o.b)("span",p({parentName:"code"},{className:"token punctuation"}),")"),Object(o.b)("span",p({parentName:"code"},{className:"token punctuation"}),";"),"\n\ndocument",Object(o.b)("span",p({parentName:"code"},{className:"token punctuation"}),"."),"body",Object(o.b)("span",p({parentName:"code"},{className:"token punctuation"}),"."),Object(o.b)("span",p({parentName:"code"},{className:"token function"}),"appendChild"),Object(o.b)("span",p({parentName:"code"},{className:"token punctuation"}),"("),"demoComponent",Object(o.b)("span",p({parentName:"code"},{className:"token punctuation"}),")"),Object(o.b)("span",p({parentName:"code"},{className:"token punctuation"}),";"),"\n\n",Object(o.b)("span",p({parentName:"code"},{className:"token comment"}),"// HMR interface"),"\n",Object(o.b)("span",p({parentName:"code"},{className:"token keyword"}),"if")," ",Object(o.b)("span",p({parentName:"code"},{className:"token punctuation"}),"("),"module",Object(o.b)("span",p({parentName:"code"},{className:"token punctuation"}),"."),"hot",Object(o.b)("span",p({parentName:"code"},{className:"token punctuation"}),")")," ",Object(o.b)("span",p({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",Object(o.b)("span",p({parentName:"code"},{className:"token comment"}),"// Capture hot update"),"\n  module",Object(o.b)("span",p({parentName:"code"},{className:"token punctuation"}),"."),"hot",Object(o.b)("span",p({parentName:"code"},{className:"token punctuation"}),"."),Object(o.b)("span",p({parentName:"code"},{className:"token function"}),"accept"),Object(o.b)("span",p({parentName:"code"},{className:"token punctuation"}),"("),Object(o.b)("span",p({parentName:"code"},{className:"token string"}),'"./component"'),Object(o.b)("span",p({parentName:"code"},{className:"token punctuation"}),",")," ",Object(o.b)("span",p({parentName:"code"},{className:"token punctuation"}),"("),Object(o.b)("span",p({parentName:"code"},{className:"token punctuation"}),")")," ",Object(o.b)("span",p({parentName:"code"},{className:"token operator"}),"=>")," ",Object(o.b)("span",p({parentName:"code"},{className:"token punctuation"}),"{"),"\n    ",Object(o.b)("span",p({parentName:"code"},{className:"token keyword"}),"const")," nextComponent ",Object(o.b)("span",p({parentName:"code"},{className:"token operator"}),"=")," ",Object(o.b)("span",p({parentName:"code"},{className:"token function"}),"component"),Object(o.b)("span",p({parentName:"code"},{className:"token punctuation"}),"("),Object(o.b)("span",p({parentName:"code"},{className:"token punctuation"}),")"),Object(o.b)("span",p({parentName:"code"},{className:"token punctuation"}),";"),"\n\n    ",Object(o.b)("span",p({parentName:"code"},{className:"token comment"}),"// Replace old content with the hot loaded one"),"\n    document",Object(o.b)("span",p({parentName:"code"},{className:"token punctuation"}),"."),"body",Object(o.b)("span",p({parentName:"code"},{className:"token punctuation"}),"."),Object(o.b)("span",p({parentName:"code"},{className:"token function"}),"replaceChild"),Object(o.b)("span",p({parentName:"code"},{className:"token punctuation"}),"("),"nextComponent",Object(o.b)("span",p({parentName:"code"},{className:"token punctuation"}),",")," demoComponent",Object(o.b)("span",p({parentName:"code"},{className:"token punctuation"}),")"),Object(o.b)("span",p({parentName:"code"},{className:"token punctuation"}),";"),"\n\n    demoComponent ",Object(o.b)("span",p({parentName:"code"},{className:"token operator"}),"=")," nextComponent",Object(o.b)("span",p({parentName:"code"},{className:"token punctuation"}),";"),"\n  ",Object(o.b)("span",p({parentName:"code"},{className:"token punctuation"}),"}"),Object(o.b)("span",p({parentName:"code"},{className:"token punctuation"}),")"),Object(o.b)("span",p({parentName:"code"},{className:"token punctuation"}),";"),"\n",Object(o.b)("span",p({parentName:"code"},{className:"token punctuation"}),"}")))),Object(o.b)("p",null,"如果刷新浏览器, 请尝试在此更改后进行修改 ",Object(o.b)("mark",null,"src/component.js"),", 然后将文本更改为其他内容, 您应注意到浏览器根本不刷新。相反, 它只是替换 ",Object(o.b)("inlineCode",{parentName:"p"},"DOM")," 节点, 同时保留应用程序的其余部分。"),Object(o.b)(l,p({message:" ",type:"info"},{mdxType:"MdAlert"}),Object(o.b)("mark",null,"module.hot.accept")," 也可以使用文件名数组。处理程序(第二个参数)是可选的。"),Object(o.b)("p",null,"下图显示了可能的输出:",Object(o.b)("br",{parentName:"p"}),"\n",Object(o.b)("img",p({parentName:"p"},{src:"../../hmr/hmr_success.png",alt:"通过HMR成功更新了模块"}))),Object(o.b)("p",null,"这个想法与 ",Object(o.b)("inlineCode",{parentName:"p"},"style"),"、",Object(o.b)("inlineCode",{parentName:"p"},"React"),"、",Object(o.b)("inlineCode",{parentName:"p"},"Redux")," 和其他技术是一样的。有时, 您不必自己实现接口, 可用的工具会为您处理这些问题。"),Object(o.b)(l,p({message:" ",type:"info"},{mdxType:"MdAlert"}),Object(o.b)("p",{parentName:"MdAlert"},"为了证明 ",Object(o.b)("inlineCode",{parentName:"p"},"HMR")," 保留了应用程序状态, 请在原始文件旁边设置一个基于",Object(o.b)("a",p({parentName:"p"},{href:"https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/checkbox",target:"_blank"}),"复选框"),"的组件。该 ",Object(o.b)("mark",null,"module.hot.accept")," 代码也必须修改以捕获对其所做的更改。")),Object(o.b)(l,p({message:" ",type:"info"},{mdxType:"MdAlert"}),Object(o.b)("p",{parentName:"MdAlert"},"当 ",Object(o.b)("inlineCode",{parentName:"p"},"minifier")," 碰到 ",Object(o.b)("mark",null,"if(module.hot)")," 代码块时, 该块将从生产构建中剔除。",Object(o.b)("a",p({parentName:"p"},{href:""}),'"代码压缩"'),"一章中深入探讨该问题。")),Object(o.b)(l,p({message:" ",type:"info"},{mdxType:"MdAlert"}),Object(o.b)("p",{parentName:"MdAlert"},Object(o.b)("a",p({parentName:"p"},{href:"https://www.npmjs.com/package/hot-accept-webpack-plugin",target:"_blank"}),"hot-accept-webpack-plugin")," 和 ",Object(o.b)("a",p({parentName:"p"},{href:"https://www.npmjs.com/package/module-hot-accept-loader",target:"_blank"}),"module-hot-accept-loader")," 允许您为匹配的每个模块编写 ",Object(o.b)("mark",null,"if (module.hot) { module.hot.accept(); }"),"。如果您的模块应该接受热加载而不实现更新行为, 这将很有用。")),Object(o.b)(l,p({message:" ",type:"info"},{mdxType:"MdAlert"}),Object(o.b)("p",{parentName:"MdAlert"},Object(o.b)("a",p({parentName:"p"},{href:"https://nativescript.org/blog/deep-dive-into-hot-module-replacement-with-webpack-part-two-handling-updates/",target:"_blank"}),'Stanimira Vlaeva 深入研究"模块热更新"'),"将更详细地讨论该主题。")),Object(o.b)("h3",{className:"__internal",id:"手动设置-wds-入口"},"手动设置 WDS 入口",Object(o.b)("a",p({parentName:"h3"},{href:"#%E6%89%8B%E5%8A%A8%E8%AE%BE%E7%BD%AE-wds-%E5%85%A5%E5%8F%A3","aria-hidden":!0,className:"anchor"}),"#")),Object(o.b)("p",null,"在上面的设置中, 与 ",Object(o.b)("inlineCode",{parentName:"p"},"WDS")," 相关的入口被自动注入。假设您正在通过 ",Object(o.b)("inlineCode",{parentName:"p"},"Node")," 使用 ",Object(o.b)("inlineCode",{parentName:"p"},"WDS"),", 则必须自行设置它们, 因为 ",Object(o.b)("inlineCode",{parentName:"p"},"Node API")," 不支持注入。下面的示例说明了如何实现此目的:"),Object(o.b)("div",{className:"rcpress-highlight","data-language":"js"},Object(o.b)("pre",p({parentName:"div"},{className:"language-js"}),Object(o.b)("code",p({parentName:"pre"},{className:"language-js"}),"entry",Object(o.b)("span",p({parentName:"code"},{className:"token operator"}),":")," ",Object(o.b)("span",p({parentName:"code"},{className:"token punctuation"}),"{"),"\n  hmr",Object(o.b)("span",p({parentName:"code"},{className:"token operator"}),":")," ",Object(o.b)("span",p({parentName:"code"},{className:"token punctuation"}),"["),"\n    ",Object(o.b)("span",p({parentName:"code"},{className:"token comment"}),"// Include the client code. Note host/post."),"\n    ",Object(o.b)("span",p({parentName:"code"},{className:"token string"}),'"webpack-dev-server/client?http://localhost:8080"'),Object(o.b)("span",p({parentName:"code"},{className:"token punctuation"}),","),"\n\n    ",Object(o.b)("span",p({parentName:"code"},{className:"token comment"}),"// Hot reload only when compiled successfully"),"\n    ",Object(o.b)("span",p({parentName:"code"},{className:"token string"}),'"webpack/hot/only-dev-server"'),Object(o.b)("span",p({parentName:"code"},{className:"token punctuation"}),","),"\n\n    ",Object(o.b)("span",p({parentName:"code"},{className:"token comment"}),"// Alternative with refresh on failure"),"\n    ",Object(o.b)("span",p({parentName:"code"},{className:"token comment"}),'// "webpack/hot/dev-server",'),"\n  ",Object(o.b)("span",p({parentName:"code"},{className:"token punctuation"}),"]"),Object(o.b)("span",p({parentName:"code"},{className:"token punctuation"}),","),"\n  ",Object(o.b)("span",p({parentName:"code"},{className:"token operator"}),"..."),Object(o.b)("span",p({parentName:"code"},{className:"token operator"}),"..."),"\n",Object(o.b)("span",p({parentName:"code"},{className:"token punctuation"}),"}"),Object(o.b)("span",p({parentName:"code"},{className:"token punctuation"}),",")))),Object(o.b)("h3",{className:"__internal",id:"hmr-与动态加载"},"HMR 与动态加载",Object(o.b)("a",p({parentName:"h3"},{href:"#hmr-%E4%B8%8E%E5%8A%A8%E6%80%81%E5%8A%A0%E8%BD%BD","aria-hidden":!0,className:"anchor"}),"#")),Object(o.b)("p",null,"通过 ",Object(o.b)("mark",null,"require.context")," 和 ",Object(o.b)("inlineCode",{parentName:"p"},"HMR")," 进行",Object(o.b)("a",p({parentName:"p"},{href:""}),"动态加载"),"需要额外的操作:"),Object(o.b)("div",{className:"rcpress-highlight","data-language":"js"},Object(o.b)("pre",p({parentName:"div"},{className:"language-js"}),Object(o.b)("code",p({parentName:"pre"},{className:"language-js"}),Object(o.b)("span",p({parentName:"code"},{className:"token keyword"}),"const")," req ",Object(o.b)("span",p({parentName:"code"},{className:"token operator"}),"=")," require",Object(o.b)("span",p({parentName:"code"},{className:"token punctuation"}),"."),Object(o.b)("span",p({parentName:"code"},{className:"token function"}),"context"),Object(o.b)("span",p({parentName:"code"},{className:"token punctuation"}),"("),Object(o.b)("span",p({parentName:"code"},{className:"token string"}),'"./pages"'),Object(o.b)("span",p({parentName:"code"},{className:"token punctuation"}),",")," ",Object(o.b)("span",p({parentName:"code"},{className:"token boolean"}),"true"),Object(o.b)("span",p({parentName:"code"},{className:"token punctuation"}),",")," ",Object(o.b)("span",p({parentName:"code"},{className:"token regex"}),"/^(.*\\.(jsx$))[^.]*$/g"),Object(o.b)("span",p({parentName:"code"},{className:"token punctuation"}),")"),Object(o.b)("span",p({parentName:"code"},{className:"token punctuation"}),";"),"\n\nmodule",Object(o.b)("span",p({parentName:"code"},{className:"token punctuation"}),"."),"hot",Object(o.b)("span",p({parentName:"code"},{className:"token punctuation"}),"."),Object(o.b)("span",p({parentName:"code"},{className:"token function"}),"accept"),Object(o.b)("span",p({parentName:"code"},{className:"token punctuation"}),"("),"req",Object(o.b)("span",p({parentName:"code"},{className:"token punctuation"}),"."),"id",Object(o.b)("span",p({parentName:"code"},{className:"token punctuation"}),",")," ",Object(o.b)("span",p({parentName:"code"},{className:"token operator"}),"..."),Object(o.b)("span",p({parentName:"code"},{className:"token operator"}),"..."),Object(o.b)("span",p({parentName:"code"},{className:"token punctuation"}),")"),Object(o.b)("span",p({parentName:"code"},{className:"token punctuation"}),";")," ",Object(o.b)("span",p({parentName:"code"},{className:"token comment"}),"// Replace modules here as above")))),Object(o.b)("h3",{className:"__internal",id:"结论"},"结论",Object(o.b)("a",p({parentName:"h3"},{href:"#%E7%BB%93%E8%AE%BA","aria-hidden":!0,className:"anchor"}),"#")),Object(o.b)("p",null,Object(o.b)("inlineCode",{parentName:"p"},"HMR")," 是 ",Object(o.b)("inlineCode",{parentName:"p"},"webpack")," 吸引开发人员的一个方面, ",Object(o.b)("inlineCode",{parentName:"p"},"webpack")," 的实现也取得了很大进展。如果要启用 ",Object(o.b)("inlineCode",{parentName:"p"},"HMR"),", 需要客户端和服务器端支持。为此, ",Object(o.b)("inlineCode",{parentName:"p"},"webpack-dev-server")," 提供这两种功能。不过您必须注意客户端, 要么找到实现 ",Object(o.b)("inlineCode",{parentName:"p"},"HMR")," 接口的解决方案, 要么自己实现它。"))}d.isMDXComponent=!0,d=Object(c.hot)(e)(d),(s="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(s.register(m,"makeShortcode","/Users/yuzhoujie/Desktop/work/webpack-book-china/docs/webpack/Appendices/hmr.md"),s.register(l,"MdAlert","/Users/yuzhoujie/Desktop/work/webpack-book-china/docs/webpack/Appendices/hmr.md"),s.register(N,"layoutProps","/Users/yuzhoujie/Desktop/work/webpack-book-china/docs/webpack/Appendices/hmr.md"),s.register("wrapper","MDXLayout","/Users/yuzhoujie/Desktop/work/webpack-book-china/docs/webpack/Appendices/hmr.md"),s.register(d,"MDXContent","/Users/yuzhoujie/Desktop/work/webpack-book-china/docs/webpack/Appendices/hmr.md")),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&r(e)}.call(this,t(21)(e))}}]);